<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">









<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
		<title>Troubleshooting :: Castle Project</title>
		<link rel="stylesheet" href="../../../../base.css" />
		<link rel="stylesheet" href="../../../../front.css" />
		<link rel="stylesheet" href="../../../../elem.css" />
		<link rel="stylesheet" href="../../../../csharp.css" />
		<link rel="stylesheet" href="../../../../TAB_styles.css" />
		<script type="text/javascript" src="../../../../mktree.js"></script>
		<script type="text/javascript" src="../../../../TAB_Function_Lib.js"></script>
	</head>

	<body>
<div id="topheader">
  <div id="maintitle">
	<h1> <a href="../../../../index.html" title="Castle Project Home" accesskey="1">Home</a> </h1>
	<h2> <a href="http://www.castlestronghold.com" title="Castle Stronghold: support, consulting and development">Castle Stronghold</a> </h2>
  </div>
  <div id="mainbar">
	<ul id="toplinks">
		<li>&nbsp;</li>
		<li><a style="_width: 70px;" href="../../../../index.html">Home</a></li>
		<li><a style="_width: 70px;" href="../../../../castle/download.html">Download</a></li>
		<li><a style="_width: 50px;" href="http://wiki.castleproject.org">Wiki</a></li>
		<li><a style="_width: 60px;" href="../../../../community/forum.html">Forum</a></li>
		<li><a style="_width: 120px;" href="../../../../jira.html">Issue Tracker</a></li>
		<li><a style="_width: 110px;" href="../../../../irc.html">IRC Channel</a></li>
		<li><a style="_width: 110px;" href="http://builds.castleproject.org">Build Server</a></li>
	</ul>
  </div>
</div>



<div id="coolpage">

	<div id="sidebar" >
		
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../activerecord/index.html">ActiveRecord</a>
</span>
  <ul>
<li>
<a href="./../../../../activerecord/gettingstarted/index.html">Getting started</a>
</li>
<li>
<a href="./../../../../activerecord/faq.html">FAQ</a>
</li>
<li>
<a href="./../../../../activerecord/recipes/index.html">Recipes</a>
</li>
<li>
<a href="./../../../../activerecord/externalarticles.html">External Articles</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../activerecord/documentation/trunk/index.html">Documentation</a>
</span>
  <ul>
<li>
<a href="./../../../../activerecord/documentation/trunk/releasenotes/index.html">Release notes</a>
</li>
<li>
<a href="./../../../../activerecord/documentation/trunk/manual/index.html">Reference Manual</a>
</li>
<li>
<a href="./../../../../activerecord/documentation/trunk/usersguide/index.html">User's Guide</a>
</li>
<li>
<a href="./../../../../activerecord/documentation/trunk/advanced/index.html">Advanced usage</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="darkmenu">
    <div class="darkmenucontent">
<span class="menutitle">
Navigation
</span>
  <ul>
<li>
<a href="./../../../../index.html">Back to Main Page</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
	<br/>
	
	</div>
		
	<div id="content">
	
		<div class="callout-pic">

<!-- Begin Table of contents -->
<div id="toc">
<h2>Table of contents</h2>
<ul>
<li class='toclevel-1'><a href="#enablingardebug"><span class="tocnumber">1</span> <span class="toctext">Enabling ActiveRecord debug</span></a>
</li>
<li class='toclevel-1'><a href="#enablingnhdebug"><span class="tocnumber">2</span> <span class="toctext">Enabling NHibernate debug</span></a>
</li>
</ul>
</div>
<!-- End Table of contents -->
		</div>

		<h1 class="firstHeading">
		    Troubleshooting
		</h1> 
	
<div class="breadcrumbs">
&raquo;
	<a href="./../../../../index.html">Home</a> 
&raquo;
	<a href="./../../../../activerecord/index.html">ActiveRecord</a> 
&raquo;
	<a href="./../../../../activerecord/documentation/index.html">Documentation</a> 
&raquo;
	<a href="./../../../../activerecord/documentation/trunk/index.html">ActiveRecord trunk Documentation</a> 
&raquo;
	<a href="./../../../../activerecord/documentation/trunk/usersguide/index.html">User's Guide</a> 
&raquo;
<u>Troubleshooting</u>
</div>

		<!-- start content -->
<p>
Sometimes things go wrong. This section lists actions you may take
to find out why a mapping is not being accepted, or why your query is
not working.
</p><a name="enablingardebug"></a>
  <h1>Enabling ActiveRecord debug</h1>
<p>
	When you enable Castle ActiveRecord debug mode, it output
	the mapping files it produces for each entity. This might be
	valuable to identify problems, or to report problems to NHibernate team.
	</p><p>
	For instructions on how to enable it check the
	<a href="../manual/xmlconfigref.html" >Xml Configuration Reference</a>.
	</p><a name="enablingnhdebug"></a>
  <h1>Enabling NHibernate debug</h1>


	NHibernate uses log4net, so it's just a matter of configuring it. For example, to have a log.txt file with all debug information you can get, use:

    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">configuration</span><span class="kwrd">&gt;</span>

    <span class="kwrd">&lt;</span><span class="html">configSections</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">section</span> <span class="attr">name</span><span class="kwrd">="nhibernate"</span> <span class="attr">type</span><span class="kwrd">="System.Configuration.NameValueSectionHandler, System, Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089"</span> <span class="kwrd">/&gt;</span> 
        <span class="kwrd">&lt;</span><span class="html">section</span> <span class="attr">name</span><span class="kwrd">="log4net"</span>
                 <span class="attr">type</span><span class="kwrd">="log4net.Config.Log4NetConfigurationSectionHandler, log4net"</span> <span class="kwrd">/&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">configSections</span><span class="kwrd">&gt;</span>
    
    <span class="kwrd">&lt;</span><span class="html">log4net</span><span class="kwrd">&gt;</span>

        <span class="rem">&lt;!-- Define some output appenders --&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">appender</span> <span class="attr">name</span><span class="kwrd">="trace"</span> <span class="attr">type</span><span class="kwrd">="log4net.Appender.TraceAppender, log4net"</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">layout</span> <span class="attr">type</span><span class="kwrd">="log4net.Layout.PatternLayout,log4net"</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;</span><span class="html">param</span> <span class="attr">name</span><span class="kwrd">="ConversionPattern"</span> <span class="attr">value</span><span class="kwrd">="%d [%t] %-5p %c [%x] &amp;amp;lt;%P{user}&amp;amp;gt; - %m%n"</span> <span class="kwrd">/&gt;</span>
            <span class="kwrd">&lt;/</span><span class="html">layout</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;/</span><span class="html">appender</span><span class="kwrd">&gt;</span>

        <span class="kwrd">&lt;</span><span class="html">appender</span> <span class="attr">name</span><span class="kwrd">="console"</span> <span class="attr">type</span><span class="kwrd">="log4net.Appender.ConsoleAppender, log4net"</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">layout</span> <span class="attr">type</span><span class="kwrd">="log4net.Layout.PatternLayout,log4net"</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;</span><span class="html">param</span> <span class="attr">name</span><span class="kwrd">="ConversionPattern"</span> <span class="attr">value</span><span class="kwrd">="%d [%t] %-5p %c [%x] &amp;amp;lt;%P{user}&amp;amp;gt; - %m%n"</span> <span class="kwrd">/&gt;</span>
            <span class="kwrd">&lt;/</span><span class="html">layout</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;/</span><span class="html">appender</span><span class="kwrd">&gt;</span>

        <span class="kwrd">&lt;</span><span class="html">appender</span> <span class="attr">name</span><span class="kwrd">="rollingFile"</span> <span class="attr">type</span><span class="kwrd">="log4net.Appender.RollingFileAppender,log4net"</span> <span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">param</span> <span class="attr">name</span><span class="kwrd">="File"</span> <span class="attr">value</span><span class="kwrd">="log.txt"</span> <span class="kwrd">/&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">param</span> <span class="attr">name</span><span class="kwrd">="AppendToFile"</span> <span class="attr">value</span><span class="kwrd">="true"</span> <span class="kwrd">/&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">param</span> <span class="attr">name</span><span class="kwrd">="RollingStyle"</span> <span class="attr">value</span><span class="kwrd">="Date"</span> <span class="kwrd">/&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">param</span> <span class="attr">name</span><span class="kwrd">="DatePattern"</span> <span class="attr">value</span><span class="kwrd">="yyyy.MM.dd"</span> <span class="kwrd">/&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">param</span> <span class="attr">name</span><span class="kwrd">="StaticLogFileName"</span> <span class="attr">value</span><span class="kwrd">="true"</span> <span class="kwrd">/&gt;</span>

            <span class="kwrd">&lt;</span><span class="html">layout</span> <span class="attr">type</span><span class="kwrd">="log4net.Layout.PatternLayout,log4net"</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;</span><span class="html">param</span> <span class="attr">name</span><span class="kwrd">="ConversionPattern"</span> <span class="attr">value</span><span class="kwrd">="%d [%t] %-5p %c [%x] &amp;amp;lt;%X{auth}&amp;amp;gt; - %m%n"</span> <span class="kwrd">/&gt;</span>
            <span class="kwrd">&lt;/</span><span class="html">layout</span><span class="kwrd">&gt;</span>
            
        <span class="kwrd">&lt;/</span><span class="html">appender</span><span class="kwrd">&gt;</span>

        <span class="kwrd">&lt;</span><span class="html">root</span><span class="kwrd">&gt;</span>
            <span class="rem">&lt;!-- priority value can be set to ALL|INFO|WARN|ERROR --&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">priority</span> <span class="attr">value</span><span class="kwrd">="ALL"</span> <span class="kwrd">/&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">appender-ref</span> <span class="attr">ref</span><span class="kwrd">="rollingFile"</span> <span class="kwrd">/&gt;</span>
        <span class="kwrd">&lt;/</span><span class="html">root</span><span class="kwrd">&gt;</span>

    <span class="kwrd">&lt;/</span><span class="html">log4net</span><span class="kwrd">&gt;</span>

    <span class="kwrd">&lt;</span><span class="html">nhibernate</span><span class="kwrd">&gt;</span> 
        <span class="rem">&lt;!-- with this set to true, SQL statements </span>
<span class="rem">         will output to the console window if it's a console app --&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">key</span><span class="kwrd">="hibernate.show_sql"</span> <span class="attr">value</span><span class="kwrd">="true"</span> <span class="kwrd">/&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">nhibernate</span><span class="kwrd">&gt;</span>
    
<span class="kwrd">&lt;/</span><span class="html">configuration</span><span class="kwrd">&gt;</span></pre>
  <p>
After that, make sure you are initializing the log4net config in your 
code by invoking its initializer.
</p>    <pre class="csharpcode">

log4net.Config.XmlConfigurator.Configure();
</pre>
  <p>
Then, run your test cases and check the log file for Exceptions - yes, do a search. There will be plenty of information about what went wrong. Note that log.txt will be in the same directory as your EXE or Web application directory -- not necessarily where your .csproj file is.
</p>		<!-- end content -->
		
	<div id="footer">
	Found an error? Something inaccurate? 
	<a href="../../../../community/getinvolved.html">Help us improve the documentation</a> <br/>
	Generated by <a href="../../../../others/anakia/index.html">Castle Anakia</a>. 
	
	<p>&nbsp;</p>
	
	<p>
	Sponsored by <img src="../../../../images/logothumb.gif" /> <a href="http://www.castlestronghold.com">Castle Stronghold</a>.
	</p>
	
	</div>

	<!-- Search Google -->
<center>
<FORM method=GET action="http://www.google.com/custom">
<TABLE bgcolor="#FFFFFF" cellspacing="4" border="0" style="border: solid 1px gray;" align="center">
<tr valign=top><td>
<A HREF="http://www.google.com/search">
<IMG SRC="http://www.google.com/logos/Logo_40wht.gif" border=0 ALT=Google align=middle></A>
</td>
<td>
<INPUT TYPE=text name=q size=31 maxlength=255 value="">
<INPUT type=submit name=sa VALUE="Google Search">
<INPUT type=hidden name=cof VALUE="S:http://www.castlestronghold.com;GL:1;VLC:#373737;AH:center;LH:63;LC:#0A50A1;GFNT:#5B5B5B;L:http://www.castleproject.org/images/castle-logo.gif;ALC:#0A50A1;BIMG:http://www.castleproject.org/images/bg.png;LW:280;T:#5B5B5B;AWFID:3d565acacdd9f388;">
<input type=hidden name=domains value="castleproject.org"><br><input type=radio name=sitesearch value=""> Search WWW <input type=radio name=sitesearch value="castleproject.org" checked> Search castleproject.org
</td></tr></TABLE>
</FORM>
<!-- Search Google -->
</center>
	&nbsp;
	<br/>

		</div> <!-- end of content -->
  </div><!-- end of page -->
  


	</body>
</html>
