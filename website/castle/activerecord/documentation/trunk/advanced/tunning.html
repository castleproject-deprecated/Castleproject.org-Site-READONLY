<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">










<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
		<title>Tuning :: Castle Project</title>
		<link rel="stylesheet" href="../../../../base.css" />
		<link rel="stylesheet" href="../../../../elem.css" />
		<link rel="stylesheet" href="../../../../csharp.css" />
		<link rel="stylesheet" href="../../../../TAB_styles.css" />
		<script language="javascript" src="../../../../mktree.js"></script>
		<script type="text/javascript" src="../../../../TAB_Function_Lib.js"></script>
	</head>

	<body>

<div id="container">

  <div id="topbuttonscontainer"></div>

  <div id="maintitle">
    <h1> <a href="/" title="Home" accesskey="1">Home</a> </h1>
  </div>

  <div id="mainbar">
    <div id="mainbarleft"><div id="mainbarright"></div></div>
  </div>
  
  <div id="page">
		<div id="sidebar" >
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../activerecord/index.html">ActiveRecord</a>
</span>
  <ul>
<li>
<a href="./../../../../activerecord/gettingstarted/index.html">Getting started</a>
</li>
<li>
<a href="./../../../../activerecord/faq.html">FAQ</a>
</li>
<li>
<a href="./../../../../activerecord/recipes/index.html">Recipes</a>
</li>
<li>
<a href="./../../../../activerecord/externalarticles.html">External Articles</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../activerecord/documentation/trunk/index.html">Documentation</a>
</span>
  <ul>
<li>
<a href="./../../../../activerecord/documentation/trunk/releasenotes/index.html">Release notes</a>
</li>
<li>
<a href="./../../../../activerecord/documentation/trunk/manual/index.html">Reference Manual</a>
</li>
<li>
<a href="./../../../../activerecord/documentation/trunk/usersguide/index.html">User's Guide</a>
</li>
<li>
<a href="./../../../../activerecord/documentation/trunk/advanced/index.html">Advanced usage</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="darkmenu">
    <div class="darkmenucontent">
<span class="menutitle">
Navigation
</span>
  <ul>
<li>
<a href="./../../../../index.html">Back to Main Page</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
			<br/>
		</div>
		
		<div id="content">
		<div class="callout-pic">

<!-- Begin Table of contents -->
<div id="toc">
<h2>Table of contents</h2>
<ul>
<li class='toclevel-1'><a href="#lazyload"><span class="tocnumber">1</span> <span class="toctext">Lazy load</span></a>
</li>
<li class='toclevel-1'><a href="#relations"><span class="tocnumber">2</span> <span class="toctext">Overused Relations</span></a>
</li>
<li class='toclevel-1'><a href="#eager-load"><span class="tocnumber">3</span> <span class="toctext">Eager load</span></a>
</li>
<li class='toclevel-1'><a href="#Profiling"><span class="tocnumber">4</span> <span class="toctext">Profiling Active Record</span></a>
</li>
<li class='toclevel-1'><a href="#sql"><span class="tocnumber">5</span> <span class="toctext">Too many selects</span></a>
</li>
</ul>
</div>
<!-- End Table of contents -->
		
		</div>

		<h1 class="firstHeading">
		    Tuning
		</h1> 
	
<div class="breadcrumbs">
&raquo;
	<a href="./../../../../index.html">Main Page</a> 
&raquo;
	<a href="./../../../../activerecord/index.html">ActiveRecord</a> 
&raquo;
	<a href="./../../../../activerecord/documentation/index.html">Documentation</a> 
&raquo;
	<a href="./../../../../activerecord/documentation/trunk/index.html">ActiveRecord RC1 Documentation</a> 
&raquo;
	<a href="./../../../../activerecord/documentation/trunk/advanced/index.html">Advanced usage</a> 
&raquo;
<u>Tuning</u>
</div>

		<!-- start content -->

  <p>
This article explains some steps towards a better performance.
</p>
		
<a name="lazyload"></a>
  <h1>Lazy load</h1>
  <p>
	Enable lazy load for relations as described on the <a href="../usersguide/lazy.html">
	User's guide: Enabling lazy load</a>. Lazy loading can be defined at the class level as well, using <tt>[ActiveRecord(Lazy=true)]</tt>.
	</p>
  <p>
	 Marking a class as lazy means that you all its persistent properties must be virtual (so NHibernate is able to intercept and load the property when it is required) and all accesses (even inside the class) to properties must be done using the properties (and not the fields).
	</p>
  <div class="note">
<div class="notetopbg">
<div class="noteborderleft">
<div class="noteborderright">
<div class="notetopleft">
<div class="notetopright">
<div class="notebottomleft">
<div class="notebottomright">
<div class="boxtitle">Quick Note</div>
<div class="innercontent">
<p>
	Lazy loading is only possible when you are inside a scope!
</p>
</div></div></div></div></div></div></div></div></div>
  <p>
	Lazy loading is one of the more important tools in increasing the performance of an application, and like most performance related issues, it require testing in the context of the application to know what is the best solution for each scenario.
	</p>
<a name="relations"></a>
  <h1>Overused Relations</h1>
  <p>
	If your code does intensive work on relations, consider replacing the operation by
	a <a href="../usersguide/hql.html">HQL query</a>. Databases are very optimized to 
	handle process on a  huge amount of data.
	</p>
  <p>
	Using HQL, you can specify the data that you want to load, saving database roundtrips. For instnace, here is how we load a post with all its comments:
	<pre forrmat="hql">
	from Post p join fetch p.Comments
	where p.Id = 1
	</pre>
	In almost all cases, it is better to ask the database for the data as expclictly as possible, rather than loading the data on demand. The HQL langauge is can bring a lot of power into your hands. Consult the <a href="http://www.hibernate.org/hib_docs/reference/en/html/queryhql.html">NHibernate documentation on HQL</a> for all the detials.
	</p>
<a name="eager-load"></a>
  <h1>Eager load</h1>
  <p>
	TODO: Eager fetching.
	</p>
<a name="Profiling"></a>
  <h1>Profiling Active Record</h1>
  <p>
	TODO: How to enable show sql, how to redirect the sql to a log file
	</p>
<a name="sql"></a>
  <h1>Too many selects</h1>
  <p>
	TODO: SELECT N+1 
	</p>
		
		<!-- end content -->
		
	<div id="footer">

	Found an error? Something inaccurate? <a href="">Help us improve the documentation</a> <br/>
	Generated by <a href="">Castle Anakia</a>

	</div>

	&nbsp;
	<br/>

		</div> <!-- end of content -->
  </div><!-- end of page -->
  
</div>

	</body>
</html>
