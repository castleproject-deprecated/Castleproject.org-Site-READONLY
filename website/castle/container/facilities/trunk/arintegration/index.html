<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">









<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
		<title>ActiveRecord Integration Facility :: Castle Project</title>
		<link rel="stylesheet" href="../../../../base.css" />
		<link rel="stylesheet" href="../../../../front.css" />
		<link rel="stylesheet" href="../../../../elem.css" />
		<link rel="stylesheet" href="../../../../csharp.css" />
		<link rel="stylesheet" href="../../../../TAB_styles.css" />
		<script type="text/javascript" src="../../../../mktree.js"></script>
		<script type="text/javascript" src="../../../../TAB_Function_Lib.js"></script>
		<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
	</head>

	<body>
<div id="topheader">
  <div id="maintitle">
	<h1> <a href="../../../../index.html" title="Castle Project Home" accesskey="1">Home</a> </h1>
	<h2> <a href="http://www.castlestronghold.com" title="Castle Stronghold: support, consulting and development">Castle Stronghold</a> </h2>
  </div>
  <div id="mainbar">
	<ul id="toplinks">
		<li>&nbsp;</li>
		<li><a style="_width: 70px;" href="../../../../index.html">Home</a></li>
		<li><a style="_width: 70px;" href="../../../../castle/download.html">Download</a></li>
		<li><a style="_width: 110px;" href="http://api.castleproject.org">API Doc</a></li>
		<li><a style="_width: 50px;" href="http://using.castleproject.org">Using</a></li>
		<li><a style="_width: 60px;" href="../../../../community/forum.html">Forum</a></li>
		<li><a style="_width: 120px;" href="../../../../jira.html">Jira/Issue tracker</a></li>
		<li><a style="_width: 110px;" href="http://builds.castleproject.org">Builds</a></li>
	</ul>
  </div>
</div>



<div id="coolpage">

	<div id="sidebar" >
		
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../container/index.html">MicroKernel/Windsor</a>
</span>
  <ul>
<li>
<a href="./../../../../container/gettingstarted/index.html">Getting started</a>
</li>
<li>
<a href="./../../../../container/documentation/index.html">Documentation</a>
</li>
<li>
<a href="./../../../../container/facilities/index.html">Facilities</a>
</li>
<li>
<a href="./../../../../container/services/index.html">Services</a>
</li>
<li>
<a href="./../../../../container/faq.html">FAQ</a>
</li>
<li>
<a href="./../../../../container/recipes/index.html">Recipes</a>
</li>
<li>
<a href="./../../../../container/externalarticles.html">External Articles</a>
</li>
<li>
<a href="./../../../../container/roadmap.html">Roadmap</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="darkmenu">
    <div class="darkmenucontent">
<span class="menutitle">
Navigation
</span>
  <ul>
<li>
<a href="./../../../../index.html">Back to Main Page</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
	<br/>
	
	</div>
		
	<div id="content">
	
		<div class="callout-pic">

<!-- Begin Table of contents -->
<div id="toc">
<h2>Table of contents</h2>
<ul>
<li class='toclevel-1'><a href="#intro"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a>
</li>
<li class='toclevel-1'><a href="#Quickstart"><span class="tocnumber">2</span> <span class="toctext">Quick start</span></a>
</li>
<li class='toclevel-1'><a href="#Autowiring"><span class="tocnumber">3</span> <span class="toctext">Auto wiring</span></a>
</li>
<li class='toclevel-1'><a href="#Transactionsupport"><span class="tocnumber">4</span> <span class="toctext">Transaction support</span></a>
</li>
<li class='toclevel-1'><a href="#Requiredassemblies"><span class="tocnumber">5</span> <span class="toctext">Required Assemblies</span></a>
</li>
</ul>
</div>
<!-- End Table of contents -->
		</div>

		<h1 class="firstHeading">
		    ActiveRecord Integration Facility
		</h1> 
	
<div class="breadcrumbs">
&raquo;
	<a href="./../../../../index.html">Home</a> 
&raquo;
	<a href="./../../../../container/index.html">MicroKernel/Windsor</a> 
&raquo;
	<a href="./../../../../container/facilities/index.html">Documentation</a> 
&raquo;
	<a href="./../../../../container/facilities/trunk/index.html">Facilities</a> 
&raquo;
<u>ActiveRecord Integration Facility</u>
</div>

		<!-- start content -->
<p>
The ActiveRecord Integration Facility
takes care of configuring and starting Castle ActiveRecord and 
adds declarative transaction support integration.
</p><p><table border="0" width="70%" ><tr><td colspan="2" align="center" ><strong>Facility Summary</strong></td></tr><tr><td width="50%" align="center" valign="top" ><table class="commontable" style="width: 300px;" ><tr><th width="70%" align="center" >Uses Proxy</th><td align="center" >No</td></tr><tr><th align="center" >Requires configuration</th><td align="center" >Yes</td></tr><tr><th align="center" >Uses attribute</th><td align="center" >No</td></tr></table></td><td width="50%" align="center" valign="top" ><table class="commontable" style="width: 300px;" ><tr><th width="60%" align="center" >Version</th><td align="center" >1.0 RC 2</td></tr><tr><th align="center" >Maturity level</th><td align="center" >High</td></tr></table></td></tr></table></p><a name="intro"></a>
  <h1>Introduction</h1>
<p>
	Use the ActiveRecord Integration facility if you want to benefit
	from the transaction management offered by the Automatic Transaction
	Management facility and if you want to have the Container configuring the
	ActiveRecord framework (this keeps the configuration centralized).
	</p><p>
	The facility does not change in any way how ActiveRecord types
	are managed, loaded, saved and so on.
	</p><a name="Quickstart"></a>
  <h1>Quick start</h1>
<p>
Just install the facility and add the proper configuration
	</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">configuration</span><span class="kwrd">&gt;</span>

  <span class="kwrd">&lt;</span><span class="html">facilities</span><span class="kwrd">&gt;</span>

    <span class="kwrd">&lt;</span><span class="html">facility</span> 
        <span class="attr">id</span><span class="kwrd">="arfacility"</span>
        <span class="attr">type</span><span class="kwrd">="Castle.Facilities.ActiveRecordIntegration.ActiveRecordFacility, Castle.Facilities.ActiveRecordIntegration"</span>
        <span class="attr">isDebug</span><span class="kwrd">="false"</span> 
        <span class="attr">isWeb</span><span class="kwrd">="false"</span><span class="kwrd">&gt;</span>

      <span class="rem">&lt;!-- Configure the namespaces for the models using Active Record Intergration --&gt;</span>
      <span class="kwrd">&lt;</span><span class="html">assemblies</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">item</span><span class="kwrd">&gt;</span>Company.Project.Model<span class="kwrd">&lt;/</span><span class="html">item</span><span class="kwrd">&gt;</span>
      <span class="kwrd">&lt;/</span><span class="html">assemblies</span><span class="kwrd">&gt;</span>

      <span class="kwrd">&lt;</span><span class="html">config</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">key</span><span class="kwrd">="hibernate.connection.driver_class"</span> <span class="attr">value</span><span class="kwrd">="NHibernate.Driver.SqlClientDriver"</span> <span class="kwrd">/&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">key</span><span class="kwrd">="hibernate.dialect"</span>                 <span class="attr">value</span><span class="kwrd">="NHibernate.Dialect.MsSql2000Dialect"</span> <span class="kwrd">/&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">key</span><span class="kwrd">="hibernate.connection.provider"</span>     <span class="attr">value</span><span class="kwrd">="NHibernate.Connection.DriverConnectionProvider"</span> <span class="kwrd">/&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">key</span><span class="kwrd">="hibernate.connection.connection_string"</span> <span class="attr">value</span><span class="kwrd">="Data Source=.;Initial Catalog=appdb;Integrated Security=SSPI"</span> <span class="kwrd">/&gt;</span>
      <span class="kwrd">&lt;/</span><span class="html">config</span><span class="kwrd">&gt;</span>

    <span class="kwrd">&lt;/</span><span class="html">facility</span><span class="kwrd">&gt;</span>

  <span class="kwrd">&lt;/</span><span class="html">facilities</span><span class="kwrd">&gt;</span>

<span class="kwrd">&lt;/</span><span class="html">configuration</span><span class="kwrd">&gt;</span></pre>
  <p>
	The configuration is basically the same as ActiveRecord. The exception
	is the <tt>assemblies</tt> node which you use to specify the
	assembly name that has the ActiveRecord types.
	</p><a name="Autowiring"></a>
  <h1>Auto wiring</h1>
<p>
The facility also adds <tt>ISessionFactoryHolder</tt>
and <tt>ISessionFactory</tt> as components, so you can 
gain access to NHibernate's <tt>ISession</tt> from any component.
For example:
	</p>    <pre class="csharpcode">

<span class="kwrd">public</span> <span class="kwrd">class</span> CustomerService
{
    <span class="kwrd">private</span> <span class="kwrd">readonly</span> ISessionFactory sessionFactory;

    <span class="kwrd">public</span> CustomerService(ISessionFactory sessionFactory)
    {
        <span class="kwrd">this</span>.sessionFactory = sessionFactory;
    }

    <span class="kwrd">public</span> <span class="kwrd">void</span> PerformSomeComplexQuery()
    {
        ISession session = sessionFactory.OpenSession();
        ...
        session.Close();
    }
}</pre>
    <div class="note">
<div class="notetopbg">
<div class="noteborderleft">
<div class="noteborderright">
<div class="notetopleft">
<div class="notetopright">
<div class="notebottomleft">
<div class="notebottomright">
<div class="boxtitle">Quick Note</div>
<div class="innercontent">
<p>
You can only invoke <tt>OpenSession</tt> on the <tt>ISessionFactory</tt>, 
and also do not forget to close the Session as it is being 
managed by ActiveRecord.
</p>
</div></div></div></div></div></div></div></div></div>
<a name="Transactionsupport"></a>
  <h1>Transaction support</h1>
<p>
	This facility is aware of transactions, 
	for more information check <a href="../atm/index.html" >Automatic 
	Transaction Management</a>.
	</p><a name="Requiredassemblies"></a>
  <h1>Required Assemblies</h1>
<p><ul><li>Castle.ActiveRecord.dll</li><li>Castle.Services.Transaction.dll</li><li>Castle.Facilities.ActiveRecordIntegration.dll</li><li>Castle.Facilities.AutomaticTransactionManagement.dll</li></ul></p>		<!-- end content -->
		
	<div id="footer">
	Found an error? Something inaccurate? 
	<a href="../../../../community/getinvolved.html">Help us improve the documentation</a> <br/>
	Generated by <a href="../../../../others/anakia/index.html">Castle Anakia</a>. 
	
	<p>&nbsp;</p>
	
	<p>
	Sponsored by <img src="../../../../images/logothumb.gif" /> <a href="http://www.castlestronghold.com">Castle Stronghold</a>.
	</p>
	
	</div>

	<!-- Search Google -->
<center>
<FORM method=GET action="http://www.google.com/custom">
<TABLE bgcolor="#FFFFFF" cellspacing="4" border="0" style="border: solid 1px gray;" align="center">
<tr valign=top><td>
<A HREF="http://www.google.com/search">
<IMG SRC="http://www.google.com/logos/Logo_40wht.gif" border=0 ALT=Google align=middle></A>
</td>
<td>
<INPUT TYPE=text name=q size=31 maxlength=255 value="">
<INPUT type=submit name=sa VALUE="Google Search">
<INPUT type=hidden name=cof VALUE="S:http://www.castlestronghold.com;GL:1;VLC:#373737;AH:center;LH:63;LC:#0A50A1;GFNT:#5B5B5B;L:http://www.castleproject.org/images/castle-logo.gif;ALC:#0A50A1;BIMG:http://www.castleproject.org/images/bg.png;LW:280;T:#5B5B5B;AWFID:3d565acacdd9f388;">
<input type=hidden name=domains value="castleproject.org"><br><input type=radio name=sitesearch value=""> Search WWW <input type=radio name=sitesearch value="castleproject.org" checked> Search castleproject.org
</td></tr></TABLE>
</FORM>
<!-- Search Google -->
</center>
	&nbsp;
	<br/>

		</div> <!-- end of content -->
  </div><!-- end of page -->
  


	<script type="text/javascript">_uacct = "UA-1190612-1";urchinTracker();</script>
	</body>
</html>
