<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">









<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
		<title>NHibernate Facility :: Castle Project</title>
		<link rel="stylesheet" href="../../../base.css" />
		<link rel="stylesheet" href="../../../front.css" />
		<link rel="stylesheet" href="../../../elem.css" />
		<link rel="stylesheet" href="../../../csharp.css" />
		<link rel="stylesheet" href="../../../TAB_styles.css" />
		<script type="text/javascript" src="../../../mktree.js"></script>
		<script type="text/javascript" src="../../../TAB_Function_Lib.js"></script>
	</head>

	<body>
<div id="topheader">
  <div id="maintitle">
	<h1> <a href="../../../index.html" title="Castle Project Home" accesskey="1">Home</a> </h1>
	<h2> <a href="http://www.castlestronghold.com" title="Castle Stronghold: support, consulting and development">Castle Stronghold</a> </h2>
  </div>
  <div id="mainbar">
	<ul id="toplinks">
		<li>&nbsp;</li>
		<li><a style="_width: 70px;" href="../../../index.html">Home</a></li>
		<li><a style="_width: 70px;" href="../../../castle/download.html">Download</a></li>
		<li><a style="_width: 50px;" href="http://wiki.castleproject.org">Wiki</a></li>
		<li><a style="_width: 60px;" href="../../../community/forum.html">Forum</a></li>
		<li><a style="_width: 100px;" href="../../../jira.html">Issue Tracker</a></li>
		<li><a style="_width: 80px;" href="../../../irc.html">IRC Channel</a></li>
		<li><a style="_width: 80px;" href="http://builds.castleproject.org">Build Server</a></li>
	</ul>
  </div>
</div>



<div id="coolpage">

	<div id="sidebar" >
		
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../container/index.html">MicroKernel/Windsor</a>
</span>
  <ul>
<li>
<a href="./../../../container/gettingstarted/index.html">Getting started</a>
</li>
<li>
<a href="./../../../container/documentation/index.html">Documentation</a>
</li>
<li>
<a href="./../../../container/facilities/index.html">Facilities</a>
</li>
<li>
<a href="./../../../container/services/index.html">Services</a>
</li>
<li>
<a href="./../../../container/faq.html">FAQ</a>
</li>
<li>
<a href="./../../../container/recipes/index.html">Recipes</a>
</li>
<li>
<a href="./../../../container/externalarticles.html">External Articles</a>
</li>
<li>
<a href="./../../../container/roadmap.html">Roadmap</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="darkmenu">
    <div class="darkmenucontent">
<span class="menutitle">
Navigation
</span>
  <ul>
<li>
<a href="./../../../index.html">Back to Main Page</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
	<br/>
	
	</div>
		
	<div id="content">
	
		<div class="callout-pic">

<!-- Begin Table of contents -->
<div id="toc">
<h2>Table of contents</h2>
<ul>
<li class='toclevel-1'><a href="#intro"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a>
<ul>
	<li class='toclevel-1'><a href="#level1"><span class="tocnumber">1.1</span> <span class="toctext">Integration level 1</span></a>
</li>
	<li class='toclevel-1'><a href="#level1"><span class="tocnumber">1.2</span> <span class="toctext">Integration level 2</span></a>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="#sitemap"><span class="tocnumber">2</span> <span class="toctext">Site Map</span></a>
</li>
<li class='toclevel-1'><a href="#Requiredassemblies"><span class="tocnumber">3</span> <span class="toctext">Required Assemblies</span></a>
</li>
</ul>
</div>
<!-- End Table of contents -->
		</div>

		<h1 class="firstHeading">
		    NHibernate Facility
		</h1> 
	
<div class="breadcrumbs">
&raquo;
	<a href="./../../../index.html">Home</a> 
&raquo;
	<a href="./../../../container/index.html">MicroKernel/Windsor</a> 
&raquo;
	<a href="./../../../container/facilities/index.html">Facilities</a> 
&raquo;
<u>NHibernate Facility</u>
</div>

		<!-- start content -->
<p>
The NHibernate Facility 
enables the usage of NHibernate O/R framework for your components.
</p><p><table border="0" width="70%" ><tr><td colspan="2" align="center" ><strong>Facility Summary</strong></td></tr><tr><td width="50%" align="center" valign="top" ><table class="commontable" style="width: 300px;" ><tr><th width="70%" align="center" >Uses Proxy</th><td align="center" >No</td></tr><tr><th align="center" >Requires configuration</th><td align="center" >Yes</td></tr><tr><th align="center" >Uses attribute</th><td align="center" >No</td></tr></table></td><td width="50%" align="center" valign="top" ><table class="commontable" style="width: 300px;" ><tr><th width="60%" align="center" >Version</th><td align="center" >Beta 3</td></tr><tr><th align="center" >Maturity level</th><td align="center" >Medium</td></tr></table></td></tr></table></p><a name="intro"></a>
  <h1>Introduction</h1>
<p>
	The NHibernate facility provides two levels of integration with NHibernate.
	You should pick the one you feel more comfortable with.
    <ul><li>You can just receive the ISessionFactory and Configuration 
	on your components and use it as you wish.</li><li>You can use <tt>ISessionManager</tt> component to manage sessions.</li></ul></p><a name="level1"></a>
  <h2>Integration level 1</h2>
<p>
	This example illustrates how you can have fine 
	grained control over ISessionFactory and, thus, ISession.
	</p>    <pre class="csharpcode">

<span class="kwrd">using</span> NHibernate;
<span class="kwrd">using</span> NHibernate.Cfg;

<span class="kwrd">public</span> <span class="kwrd">class</span> MyDataAccessClass
{
    <span class="kwrd">private</span> ISessionFactory _sessFactory;
    <span class="kwrd">private</span> Configuration _cfg;

    <span class="kwrd">public</span> MyDataAccessClass(ISessionFactory sessFactory, Configuration cfg)
    {
        _sessFactory = sessFactory;
        _cfg = cfg;
    }

    <span class="kwrd">public</span> <span class="kwrd">void</span> SaveSomething(<span class="kwrd">object</span> item)
    {
        ISession session = _sessFactory.OpenSession();

        <span class="rem">// .. do whatever you want </span>

        session.Close();
    }
}</pre>
  <p>
	With this scenario you have to control transactions 
	and share sessions instances manually.
	</p><a name="level1"></a>
  <h2>Integration level 2</h2>
<p>
	The second level of integration introduce the 
	ISessionManager interface so you can use session 
	and leave to the ISessionManager implementation the responsability 
	of sharing compatible session within an invocation chain and 
	be aware of transactions.
	</p><a name="sitemap"></a>
  <h1>Site Map</h1>
<p>
	Please consult the others documents to learn more about the
	NHibernate facility.
	</p>  <div class="sitemap">
<ul class="mktree" id="tree1">

	<li class="liOpen">
<strong><a href="./index.html">NHibernate Facility</a></strong>
<ul>

    <li class="liOpen">
	<a href="./index.html#intro">
	Introduction
	</a>
<ul>

    <li class="liOpen">
	<a href="./index.html#level1">
	Integration level 1
	</a>
	</li>

    <li class="liOpen">
	<a href="./index.html#level1">
	Integration level 2
	</a>
	</li>
</ul>
	</li>

    <li class="liOpen">
	<a href="./index.html#sitemap">
	Site Map
	</a>
	</li>

    <li class="liOpen">
	<a href="./index.html#Requiredassemblies">
	Required Assemblies
	</a>
	</li>

    <li class="liOpen">
	<i><a href="./configref.html">Configuration Schema</a></i>
<ul>

    <li class="liOpen">
	<a href="./configref.html#config">
	Configuration Schema
	</a>
<ul>

    <li class="liOpen">
	<a href="./configref.html#sample">
	Configuration Sample
	</a>
	</li>
</ul>
	</li>
</ul>
	</li>

    <li class="liOpen">
	<i><a href="./usingit.html">Using it</a></i>
<ul>

    <li class="liOpen">
	<a href="./usingit.html#SessManager">
	ISessionManager
	</a>
	</li>
</ul>
	</li>

    <li class="liOpen">
	<i><a href="./transactions.html">Transaction Support</a></i>
<ul>

    <li class="liOpen">
	<a href="./transactions.html#Transactionsupport">
	Transaction support
	</a>
	</li>
</ul>
	</li>

    <li class="liOpen">
	<i><a href="./webapp.html">Using it in a web application</a></i>
<ul>



</ul>
	</li>

    <li class="liOpen">
	<i><a href="./genericdao.html">Generic Dao</a></i>
	</li>
</ul>
	</li>
</ul>
</div>
<a name="Requiredassemblies"></a>
  <h1>Required Assemblies</h1>
<p><ul><li>Castle.Facilities.NHibernateIntegration.dll</li><li>NHibernate assemblies</li></ul></p>		<!-- end content -->
		
	<div id="footer">
	Found an error? Something inaccurate? 
	<a href="../../../community/getinvolved.html">Help us improve the documentation</a> <br/>
	Generated by <a href="../../../others/anakia/index.html">Castle Anakia</a>. 
	
	<p>&nbsp;</p>
	
	<p>
	Sponsored by <img src="../../../images/logothumb.gif" /> <a href="http://www.castlestronghold.com">Castle Stronghold</a>.
	</p>
	
	</div>

	&nbsp;
	<br/>

		</div> <!-- end of content -->
  </div><!-- end of page -->
  


	</body>
</html>
