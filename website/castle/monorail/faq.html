<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">










<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
		<title>FAQ :: Castle Project</title>
		<link rel="stylesheet" href="../base.css" />
		<link rel="stylesheet" href="../elem.css" />
		<link rel="stylesheet" href="../csharp.css" />
		<link rel="stylesheet" href="../TAB_styles.css" />
		<script language="javascript" src="../mktree.js"></script>
		<script type="text/javascript" src="../TAB_Function_Lib.js"></script>
	</head>

	<body>

<div id="container">

  <div id="topbuttonscontainer"></div>

  <div id="maintitle">
    <h1> <a href="/" title="Home" accesskey="1">Home</a> </h1>
  </div>

  <div id="mainbar">
    <div id="mainbarleft"><div id="mainbarright"></div></div>
  </div>
  
  <div id="page">
		<div id="sidebar" >
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../monorail/index.html">MonoRail</a>
</span>
  <ul>
<li>
<a href="./../monorail/gettingstarted/index.html">Getting started</a>
</li>
<li>
<a href="./../monorail/documentation/index.html">Documentation</a>
</li>
<li>
<a href="./../monorail/faq.html">FAQ</a>
</li>
<li>
<a href="./../monorail/recipes/index.html">Recipes</a>
</li>
<li>
<a href="./../monorail/externalarticles.html">External Articles</a>
</li>
<li>
<a href="./../monorail/roadmap.html">Roadmap</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="darkmenu">
    <div class="darkmenucontent">
<span class="menutitle">
Navigation
</span>
  <ul>
<li>
<a href="./../index.html">Back to Main Page</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
			<br/>
		</div>
		
		<div id="content">
		<div class="callout-pic">
		<img src="../images/monorail-med.png" />

<!-- Begin Table of contents -->
<div id="toc">
<h2>Table of contents</h2>
<ul>
<li class='toclevel-1'><a href="#general"><span class="tocnumber">1</span> <span class="toctext">General questions</span></a>
<ul>
	<li class='toclevel-1'><span class="tocnumber">1.1</span> <span class="toctext">Is MonoRail stable? Why it's not 1.0?</span>
</li>
	<li class='toclevel-1'><span class="tocnumber">1.2</span> <span class="toctext">Is there any public site using MonoRail?</span>
</li>
	<li class='toclevel-1'><span class="tocnumber">1.3</span> <span class="toctext">Where to ask for help?</span>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
	<li class='toclevel-1'><span class="tocnumber">2.1</span> <span class="toctext">Cassini refuses to start</span>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="#AjaxSupport"><span class="tocnumber">3</span> <span class="toctext">Ajax Support</span></a>
<ul>
	<li class='toclevel-1'><span class="tocnumber">3.1</span> <span class="toctext">How do you provide Ajax support?</span>
</li>
	<li class='toclevel-1'><span class="tocnumber">3.2</span> <span class="toctext">What other javascript libraries come with MonoRail?</span>
</li>
	<li class='toclevel-1'><span class="tocnumber">3.3</span> <span class="toctext">I'm trying to pass some parameters to my action but it's not working. What's wrong?</span>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="#security"><span class="tocnumber">4</span> <span class="toctext">Security</span></a>
<ul>
	<li class='toclevel-1'><span class="tocnumber">4.1</span> <span class="toctext">Is there anything I should be concerned about related to security when using MonoRail?</span>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="#Authentication_Authorization"><span class="tocnumber">5</span> <span class="toctext">Authentication/Authorization</span></a>
<ul>
	<li class='toclevel-1'><span class="tocnumber">5.1</span> <span class="toctext">How to handle authentication / authorization?</span>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="#NVelocity View Engine"><span class="tocnumber">6</span> <span class="toctext">NVelocity View Engine</span></a>
<ul>
	<li class='toclevel-1'><span class="tocnumber">6.1</span> <span class="toctext">Is there a way to render a content of another view within a view?</span>
</li>
	<li class='toclevel-1'><span class="tocnumber">6.2</span> <span class="toctext">Is there any way to generate arrays with NVelocity?</span>
</li>
	<li class='toclevel-1'><span class="tocnumber">6.3</span> <span class="toctext">I'm trying to access an indexer on a NVelocity template with no success</span>
</li>
	<li class='toclevel-1'><span class="tocnumber">6.4</span> <span class="toctext">Can I use WebForm Controls on NVelocity template?</span>
</li>
</ul>
</li>
</ul>
</div>
<!-- End Table of contents -->
		
		</div>

		<h1 class="firstHeading">
		    FAQ
		</h1> 
	
<div class="breadcrumbs">
&raquo;
	<a href="./../index.html">Main Page</a> 
&raquo;
	<a href="./../monorail/index.html">MonoRail</a> 
&raquo;
<u>FAQ</u>
</div>

		<!-- start content -->

  <p>
This page has a list of frequently asked questions.
</p>
		
<a name="general"></a>
  <h1>General questions</h1>
  <h2>Is MonoRail stable? Why it's not 1.0?</h2>
  <p>
	Yes, very stable, albeit there's always room for improvements. Check our issue tracker.
	</p>
  <p>
We are not 1.0 because there are important features not implemented yet, like Caching and Logging support.
	</p>
  <h2>Is there any public site using MonoRail?</h2>
  <p>
	See this <a href="http://forum.castleproject.org/viewforum.php?f=6">forum section</a></p>
  <h2>Where to ask for help?</h2>
  <p>
	The best place for ask for help - and to check if your question hasn't been asked before - is our forum.
	</p>
<a name="Installation"></a>
  <h1>Installation</h1>
  <h2>Cassini refuses to start</h2>
  <p>
	Make sure you have registered Cassini.dll in the GAC (global assembly cache).
	</p>
  <pre class="commonpre">
  &gt; gacutil /i Cassini.dll
  </pre>
<a name="AjaxSupport"></a>
  <h1>Ajax Support</h1>
  <h2>How do you provide Ajax support?</h2>
  <p>
	We did not reinvent the wheel. 
	We use the awesome <a href="http://prototype.conio.net/">prototype js library</a></p>
  <h2>What other javascript libraries come with MonoRail?</h2>
  <p><ul><li><a href="http://script.aculo.us/">script.aculo.us</a></li><li><a href="http://ripcord.co.nz/behaviour/">Behaviour</a></li><li><a href="http://www.axentric.com/aside/fat/">The Fade Anything Technique</a></li><li><a href="http://www.castleproject.org/fValidate/fValidate%20_%20Type%20Reference%20_%20A%20high%20quality%20javascript%20form%20validation%20tool.htm">fValidate</a></li></ul></p>
  <h2>I'm trying to pass some parameters to my action but it's not working. What's wrong?</h2>
  <p>	
You need to use the <tt>with</tt> 
parameter used by the <tt>AjaxUpdater</tt>/<tt>AjaxRequest</tt>. For example:
	</p>
    <pre class="csharpcode">
 
$AjaxHelper.LinkToRemote("Some action", "ProcessItem.rails", "%{update='resultdiv', with='productid=10'}")
</pre>
    <p>Controller's code:</p>
    <pre class="csharpcode">

<span class="kwrd">public</span> <span class="kwrd">void</span> ProcessItem(<span class="kwrd">int</span> productid)
{
  ...
}</pre>
  <a name="security"></a>
  <h1>Security</h1>
  <h2>Is there anything I should be concerned about related to security when using MonoRail?</h2>
  <p>Yes, a few things. </p>
  <p>
First if your view directory is on the web folder then clients can potentially see the source code of the views, which is not good. To prevent this, associate the view extension with a IHttpHandler that comes with ASP.Net.
</p>
  <p>For nvelocity view engine:</p>
    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">system.web</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">httpHandlers</span><span class="kwrd">&gt;</span>    
        <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">verb</span><span class="kwrd">="*"</span> <span class="attr">path</span><span class="kwrd">="*.vm"</span> <span class="attr">type</span><span class="kwrd">="System.Web.HttpForbiddenHandler"</span><span class="kwrd">/&gt;</span>
        ...
</pre>
    <p>For brail</p>
    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">system.web</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">httpHandlers</span><span class="kwrd">&gt;</span>    
        <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">verb</span><span class="kwrd">="*"</span> <span class="attr">path</span><span class="kwrd">="*.boo"</span> <span class="attr">type</span><span class="kwrd">="System.Web.HttpForbiddenHandler"</span><span class="kwrd">/&gt;</span>
        ...
</pre>
    <p>And for the StringTemplate view engine</p>
    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">system.web</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">httpHandlers</span><span class="kwrd">&gt;</span>    
        <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">verb</span><span class="kwrd">="*"</span> <span class="attr">path</span><span class="kwrd">="*.st"</span> <span class="attr">type</span><span class="kwrd">="System.Web.HttpForbiddenHandler"</span><span class="kwrd">/&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">verb</span><span class="kwrd">="*"</span> <span class="attr">path</span><span class="kwrd">="*.sti"</span> <span class="attr">type</span><span class="kwrd">="System.Web.HttpForbiddenHandler"</span><span class="kwrd">/&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">verb</span><span class="kwrd">="*"</span> <span class="attr">path</span><span class="kwrd">="*.stg"</span> <span class="attr">type</span><span class="kwrd">="System.Web.HttpForbiddenHandler"</span><span class="kwrd">/&gt;</span>
        ...
</pre>
    <p>
Second, if you use the DataBinder to populate classes, you might want to inform a Exclude or Allow list to prevent people from populating properties that are not on the form. For more on this see [[MonoRail:Mastering SmartDispatcherController and DataBinds]]

TODO Fix this link
</p>
<a name="Authentication_Authorization"></a>
  <h1>Authentication/Authorization</h1>
  <h2>How to handle authentication / authorization?</h2>
  <p>
There is not only one way of handling this. You can rely on the standard support offered by ASP.Net framework by setting up the an authentication strategy (using FormsAuthentication or PassportAuthentication or WindowsAuthentication) and use the <tt>OnAuthenticate</tt> event to supply an implementation of <tt>IPrincipal</tt>. Then control the authorization using the <code>authorization</code> node.
</p>
  <p>
Or you can create your own by using a MonoRail filters. A filter can check if the user is authenticated by looking for a cookie or an entry in the session, for example. If not authenticated, it can redirect the client to a login action and return false to stop further processing for the request.
</p>
  <p>
Another option is to mix both methods. Providing an implementation of <code>IPrincipal</code> and setting it on the request activity allows you to enfore some authorization using the <tt>PrincipalPermission</tt>. For example
</p>
    <pre class="csharpcode">

<span class="kwrd">public</span> <span class="kwrd">class</span> AdminController : AbstractSecureController
{
  [PrincipalPermission(SecurityAction.Demand, Role=<span class="str">"IsAdmin"</span>)]
  <span class="kwrd">public</span> <span class="kwrd">void</span> Index()
  {
  }

  ...

  [PrincipalPermission(SecurityAction.Demand, Role=<span class="str">"CanChangePasswords"</span>)]
  <span class="kwrd">public</span> <span class="kwrd">void</span> ChangeUserPassword(...)
  {
    ...
  }
}
</pre>
    <p>
The good thing is that the PrincipalPermission is part of the .Net security infrastructure, so it's up to it to enforce the rules. You can also associate a rescue with the <tt>SecurityException</tt> so you can present a nice error message for the user.
</p>
<a name="NVelocity View Engine"></a>
  <h1>NVelocity View Engine</h1>
  <h2>Is there a way to render a content of another view within a view?</h2>
  <p><i>Sometimes this is asked in another form: "What's the equivalent of render partial in NVelocity?"</i></p>
  <p>
Use the <tt>#parse</tt> directive. Suppose you have the following directory structure
</p>
  <pre class="commonpre">
  
WebFolder
  Views
    Shared

  </pre>
  <p>
And on the ''shared'' folder there's a 'header.vm' file. You can then, from any view, invoke it
</p>
    <pre class="csharpcode">

#parse("Shared/header.vm")
</pre>
    <h2>Is there any way to generate arrays with NVelocity?</h2>
  <p>
Yes. See the following examples:
</p>
    <pre class="csharpcode">

#foreach($day in [1..30])
  $day
#end

#set($months = ['Jan', 'Feb'])
</pre>
    <h2>I'm trying to access an indexer on a NVelocity template with no success</h2>
  <p>
Use <tt>get_Item</tt>:
</p>
    <pre class="csharpcode">

$dict.get_Item("key")
</pre>
    <h2>Can I use WebForm Controls on NVelocity template?</h2>
  <p>
No. There are hacks, though. But the best way to handle these situations is to use the Composite View Engine and have NVelocity and WebForm (aspx) views on the same project.
</p>
		
		<!-- end content -->
		
	<div id="footer">

	Found an error? Something inaccurate? <a href="">Help us improve the documentation</a> <br/>
	Generated by <a href="">Castle Anakia</a>

	</div>

	&nbsp;
	<br/>

		</div> <!-- end of content -->
  </div><!-- end of page -->
  
</div>

	</body>
</html>
