<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">









<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
		<title>Controller basics :: Castle Project</title>
		<link rel="stylesheet" href="../../../../base.css" />
		<link rel="stylesheet" href="../../../../front.css" />
		<link rel="stylesheet" href="../../../../elem.css" />
		<link rel="stylesheet" href="../../../../csharp.css" />
		<link rel="stylesheet" href="../../../../TAB_styles.css" />
		<script type="text/javascript" src="../../../../mktree.js"></script>
		<script type="text/javascript" src="../../../../TAB_Function_Lib.js"></script>
		<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
	</head>

	<body>
<div id="topheader">
  <div id="maintitle">
	<h1> <a href="../../../../index.html" title="Castle Project Home" accesskey="1">Home</a> </h1>
	<h2> <a href="http://www.castlestronghold.com" title="Castle Stronghold: support, consulting and development">Castle Stronghold</a> </h2>
  </div>
  <div id="mainbar">
	<ul id="toplinks">
		<li>&nbsp;</li>
		<li><a style="_width: 70px;" href="../../../../index.html">Home</a></li>
		<li><a style="_width: 70px;" href="../../../../castle/download.html">Download</a></li>
		<li><a style="_width: 110px;" href="http://api.castleproject.org">API Doc</a></li>
		<li><a style="_width: 50px;" href="http://using.castleproject.org">Using</a></li>
		<li><a style="_width: 60px;" href="../../../../community/forum.html">Forum</a></li>
		<li><a style="_width: 120px;" href="../../../../issuetracker.html">Issue Tracker</a></li>
		<li><a style="_width: 110px;" href="http://builds.castleproject.org">Builds</a></li>
	</ul>
  </div>
</div>



<div id="coolpage">

	<div id="sidebar" >
		
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../monorail/index.html">MonoRail</a>
</span>
  <ul>
<li>
<a href="./../../../../monorail/gettingstarted/index.html">Getting started</a>
</li>
<li>
<a href="./../../../../monorail/faq.html">FAQ</a>
</li>
<li>
<a href="./../../../../monorail/recipes/index.html">Recipes</a>
</li>
<li>
<a href="./../../../../monorail/externalarticles.html">External Articles</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../monorail/documentation/trunk/index.html">Documentation</a>
</span>
  <ul>
<li>
<a href="./../../../../monorail/documentation/trunk/releasenotes/index.html">Release notes</a>
</li>
<li>
<a href="./../../../../monorail/documentation/trunk/manual/index.html">Reference Manual</a>
</li>
<li>
<a href="./../../../../monorail/documentation/trunk/usersguide/index.html">User's Guide</a>
</li>
<li>
<a href="./../../../../monorail/documentation/trunk/advanced/index.html">Advanced usage</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="darkmenu">
    <div class="darkmenucontent">
<span class="menutitle">
Navigation
</span>
  <ul>
<li>
<a href="./../../../../index.html">Back to Main Page</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
	<br/>
	
	</div>
		
	<div id="content">
	
		<div class="callout-pic">

<!-- Begin Table of contents -->
<div id="toc">
<h2>Table of contents</h2>
<ul>
<li class='toclevel-1'><a href="#NameConvention"><span class="tocnumber">1</span> <span class="toctext">Name convention</span></a>
</li>
<li class='toclevel-1'><a href="#Areas"><span class="tocnumber">2</span> <span class="toctext">Areas</span></a>
</li>
<li class='toclevel-1'><a href="#Actions"><span class="tocnumber">3</span> <span class="toctext">Actions</span></a>
</li>
<li class='toclevel-1'><a href="#Redirecting"><span class="tocnumber">4</span> <span class="toctext">Redirecting</span></a>
</li>
<li class='toclevel-1'><a href="#UsefulProperties"><span class="tocnumber">5</span> <span class="toctext">Useful Properties</span></a>
<ul>
	<li class='toclevel-1'><span class="tocnumber">5.1</span> <span class="toctext">Request/Response</span>
</li>
	<li class='toclevel-1'><span class="tocnumber">5.2</span> <span class="toctext">Controller information</span>
</li>
	<li class='toclevel-1'><span class="tocnumber">5.3</span> <span class="toctext">Others</span>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="#DefaultAction"><span class="tocnumber">6</span> <span class="toctext">Default Action</span></a>
</li>
</ul>
</div>
<!-- End Table of contents -->
		</div>

		<h1 class="firstHeading">
		    Controller basics
		</h1> 
	
<div class="breadcrumbs">
&raquo;
	<a href="./../../../../index.html">Home</a> 
&raquo;
	<a href="./../../../../monorail/index.html">MonoRail</a> 
&raquo;
	<a href="./../../../../monorail/documentation/index.html">Documentation</a> 
&raquo;
	<a href="./../../../../monorail/documentation/trunk/index.html">MonoRail trunk Documentation</a> 
&raquo;
	<a href="./../../../../monorail/documentation/trunk/usersguide/index.html">User's Guide</a> 
&raquo;
<u>Controller basics</u>
</div>

		<!-- start content -->
<p>
Controllers are extremelly important as they are the 
intelligent piece of the application that orchestrates 
the application flow. The Getting started section depicted 
the basic usage of controllers.
</p><p>
By default, the class name is used as the controller identification. 
If your controller's class name ends with <i>Controller</i>, 
the controller identifier is the class name, but stipped of <i>Controller</i>. You can also use the 
<tt>ControllerDetails</tt> attribute to associate a different name 
to your controller class.
</p><a name="NameConvention"></a>
  <h1>Name convention</h1>
<p>
	It is advisable that controller classes 
	follow the Name + Controller suffix convention. 
	When the controller is registered, MonoRail strips
	the "Controller" suffix and uses the name as the key.
	The controller name is used on the URL to access it.
	</p><p>
	The attribute <tt>ControllerDetailsAttribute</tt>
	can be used to define the exact name 
	for the controller. For example:
	</p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

[ControllerDetails(<span class="str">"cust"</span>)]
<span class="kwrd">public</span> <span class="kwrd">class</span> CustomerController : Controller
{

}</pre>
  <p>
	Instead of <tt>Customer</tt>, the <tt>ControllerDetailsAttribute</tt> has defined <tt>cust</tt> as the name that will be used in URLs
  to identify this controller.
	</p><a name="Areas"></a>
  <h1>Areas</h1>
<p>
	MonoRail supports the concept of areas, which are logical groups of
	controllers. All controllers belong to an area. The default area
	is an empty (unnamed) one.
	</p><p>
	Imagine a tree of controllers. Each branch in the tree
	is an area, each leaf is a controller. 
	</p><p>
	To define an area, use the <tt>ControllerDetailsAttribute</tt>
	attribute:
	</p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

[ControllerDetails(Area=<span class="str">"admin"</span>)]
<span class="kwrd">public</span> <span class="kwrd">class</span> UsersController : Controller
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> Index()
    {
    }
}</pre>
  <p>
	This controller is now is accessible using the following url path:
	</p><p><tt>/admin/users/index.rails</tt></p><p>
	You can also define more than one level:
	</p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

[ControllerDetails(Area=<span class="str">"admin/users"</span>)]
<span class="kwrd">public</span> <span class="kwrd">class</span> PasswordMngController : Controller
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> Index()
    {
    }
}</pre>
  <p>
	This controller now is accessible using the following url path:
	</p><p><tt>/admin/users/passwordmng/index.rails</tt></p><a name="Actions"></a>
  <h1>Actions</h1>
<p>
	We define actions as the procedures that can be invoked on your controller.
	Basically it translates to any public instance method your controller 
	exposes.
	</p>  <div class="note">
<div class="notetopbg">
<div class="noteborderleft">
<div class="noteborderright">
<div class="notetopleft">
<div class="notetopright">
<div class="notebottomleft">
<div class="notebottomright">
<div class="boxtitle">Quick Note</div>
<div class="innercontent">
<p>
	If you do not want a specific method to be "invocable", it must be non-public.
	</p>
</div></div></div></div></div></div></div></div></div>
<a name="Redirecting"></a>
  <h1>Redirecting</h1>
<p>
	The <tt>Controller</tt> offers a handful of <tt>Redirect</tt>
	overloads. Some of them allow you to pass along query string parameters.
	</p><p>
	The following table list some of the overloads:
	</p><p><table class="commontable" ><tr><th>Name</th><th>Description</th></tr><tr><td><tt>RedirectToAction(string action)</tt></td><td>Redirects to another action in the same controller.</td></tr><tr><td><tt>RedirectToAction(String action, params String[] queryStringParameters)</tt></td><td>Redirects to another action in the same controller specifying query string entries.</td></tr><tr><td><tt>RedirectToAction(String action, IDictionary parameters)</tt></td><td>Redirects to another action in the same controller specifying query string entries.</td></tr><tr><td><tt>Redirect(String url)</tt></td><td> Redirects to the specified URL.</td></tr><tr><td><tt>Redirect(String url, IDictionary parameters)</tt></td><td>Redirects to the specified URL specifying query string entries. </td></tr><tr><td><tt>Redirect(String controller, String action)</tt></td><td>Redirects to another controller and action.</td></tr><tr><td><tt>Redirect(String area, String controller, String action)</tt></td><td>Redirects to another controller and action (within an area).</td></tr></table></p><a name="UsefulProperties"></a>
  <h1>Useful Properties</h1>
<p>
	The following properties exposed by the <tt>Controller</tt> are
	very likely to be used all the time while developing an application.
	
	</p>  <h2>Request/Response</h2>
<p><table class="commontable" ><tr><th>Property</th><th>Type</th><th>Description</th></tr><tr><td><tt>Context</tt></td><td align="center" ><tt>Castle.MonoRail.Framework.IRailsEngineContext</tt></td><td>Gets the context of this request execution.</td></tr><tr><td><tt>Session</tt></td><td align="center" ><tt>IDictionary</tt></td><td>Gets the Session dictionary.</td></tr><tr><td><tt>Flash</tt></td><td align="center" ><tt>Castle.MonoRail.Framework.Flash</tt></td><td>Gets a dictionary of volative items. Ideal for showing success and failures messages.</td></tr><tr><td><tt>HttpContext</tt></td><td align="center" ><tt>System.Web.HttpContext</tt></td><td>Gets the web context of ASP.NET API.</td></tr><tr><td><tt>Request</tt></td><td align="center" ><tt>Castle.MonoRail.Framework.IRequest</tt></td><td>Gets the request object.</td></tr><tr><td><tt>Response</tt></td><td align="center" ><tt>Castle.MonoRail.Framework.IResponse</tt></td><td>Gets the response object.</td></tr><tr><td><tt>Params</tt></td><td align="center" ><tt>NameValueCollection</tt></td><td>Shortcut to <tt>IRequest.Params</tt></td></tr><tr><td><tt>Form</tt></td><td align="center" ><tt>NameValueCollection</tt></td><td>Shortcut to <tt>IRequest.Form</tt></td></tr><tr><td><tt>Query</tt></td><td align="center" ><tt>NameValueCollection</tt></td><td>Shortcut to <tt>IRequest.QueryString</tt></td></tr><tr><td><tt>IsClientConnected</tt></td><td align="center" ><tt>bool</tt></td><td>Shortcut to <tt>IResponse.IsClientConnected</tt></td></tr></table></p>  <h2>Controller information</h2>
<p><table class="commontable" ><tr><th>Property</th><th>Type</th><th>Description</th></tr><tr><td><tt>Name</tt></td><td align="center" ><tt>string</tt></td><td>Gets the controller's name (as MonoRail knows it)</td></tr><tr><td><tt>AreaName</tt></td><td align="center" ><tt>string</tt></td><td> Gets the controller's area name.</td></tr><tr><td><tt>LayoutName</tt></td><td align="center" ><tt>string</tt></td><td>Gets or set the layout being used.</td></tr><tr><td><tt>Action</tt></td><td align="center" ><tt>string</tt></td><td>Gets the name of the action being processed.</td></tr><tr><td><tt>SelectedViewName</tt></td><td align="center" ><tt>string</tt></td><td>Gets or sets the view which will be rendered by this action. 
		We encourage you to use
		<tt>RenderView</tt> or <tt>RenderSharedView</tt> instead of setting this property.</td></tr></table></p>  <h2>Others</h2>
<p><table class="commontable" ><tr><th>Property</th><th>Type</th><th>Description</th></tr><tr><td><tt>Logger</tt></td><td align="center" ><tt>Castle.Core.Logging.ILogger</tt></td><td>Logger for the controller (you must enable logging first)</td></tr><tr><td><tt>IsPostBack</tt></td><td align="center" ><tt>bool</tt></td><td>Determines if the current Action resulted from an ASP.NET PostBack.
		As a result, this property is only relavent when using WebForms views.
		It is placed on the base Controller for convenience only to avoid the
		need to extend the Controller or provide additional helper classes.
		</td></tr></table></p><a name="DefaultAction"></a>
  <h1>Default Action</h1>
<p>
	The <tt>DefaultActionAttribute</tt> attribute provides a way to 
	associate a default action method that will be called if a 
	matching action method can not be found on the controller. One possible use is 
	so that a web designer can add views without the need for a 
	developer to add new action methods to the class. To associate a default action 
	with your controller, use the <tt>DefaultActionAttribute</tt> attribute. 
	This attribute can only be applied at the class level.
	</p><p>
	If you don't specify a name in the <tt>DefaultActionAttribute</tt>, the method
	<tt>DefaultAction</tt> will be used.
	</p>    <pre class="csharpcode">

[DefaultAction]
<span class="kwrd">public</span> <span class="kwrd">class</span> HomeController : Controller
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> Index()
    {
    }

    <span class="kwrd">public</span> <span class="kwrd">void</span> DefaultAction()
    {
    <span class="rem">// default to a "not found" template</span>
        <span class="kwrd">string</span> template = <span class="str">"notfound"</span>;

    <span class="rem">// check and see if a template exists for the </span>
    <span class="rem">// action indicated in the URL</span>
        <span class="kwrd">if</span> (HasTemplate(<span class="str">"home/"</span> + Action))
        {
            template = Action;
        }

        RenderView(template);
    }
}</pre>
  <p>In the following example, the code specifies the name of the action to be invoked</p>    <pre class="csharpcode">

[DefaultAction(<span class="str">"Foo"</span>)]
<span class="kwrd">public</span> <span class="kwrd">class</span> HomeController : Controller
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> Index()
    {
    }

    <span class="kwrd">public</span> <span class="kwrd">void</span> Foo()
    {
        RenderText(Action + <span class="str">" was not found"</span>);
    }
}</pre>
  		<!-- end content -->
		
	<div id="footer">
<script type="text/javascript"><!--
google_ad_client = "pub-2091974950947714";
/* 728x90, created 2/13/08 */
google_ad_slot = "5378217716";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
	
	<br/>
	Found an error? Something inaccurate? 
	<a href="../../../../community/getinvolved.html">Help us improve the documentation</a> <br/>
	Generated by <a href="../../../../others/anakia/index.html">Castle Anakia</a>. 
	
	<p>&nbsp;</p>
	
	<p>
	Sponsored by <img src="../../../../images/logothumb.gif" /> <a href="http://www.castlestronghold.com">Castle Stronghold</a>.
	</p>
	
	</div>

	<!-- Search Google -->
<center>
<FORM method=GET action="http://www.google.com/custom">
<TABLE bgcolor="#FFFFFF" cellspacing="4" border="0" style="border: solid 1px gray;" align="center">
<tr valign=top><td>
<A HREF="http://www.google.com/search">
<IMG SRC="http://www.google.com/logos/Logo_40wht.gif" border=0 ALT=Google align=middle></A>
</td>
<td>
<INPUT TYPE=text name=q size=31 maxlength=255 value="">
<INPUT type=submit name=sa VALUE="Google Search">
<INPUT type=hidden name=cof VALUE="S:http://www.castlestronghold.com;GL:1;VLC:#373737;AH:center;LH:63;LC:#0A50A1;GFNT:#5B5B5B;L:http://www.castleproject.org/images/castle-logo.gif;ALC:#0A50A1;BIMG:http://www.castleproject.org/images/bg.png;LW:280;T:#5B5B5B;AWFID:3d565acacdd9f388;">
<input type=hidden name=domains value="castleproject.org"><br><input type=radio name=sitesearch value=""> Search WWW <input type=radio name=sitesearch value="castleproject.org" checked> Search castleproject.org
</td></tr></TABLE>
</FORM>
<!-- Search Google -->
</center>
	&nbsp;
	<br/>

		</div> <!-- end of content -->
  </div><!-- end of page -->
  


	<script type="text/javascript">_uacct = "UA-1190612-1";urchinTracker();</script>
	</body>
</html>
