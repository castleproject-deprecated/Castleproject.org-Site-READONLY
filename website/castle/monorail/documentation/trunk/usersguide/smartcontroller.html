<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">









<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
		<title>SmartDispatcherController :: Castle Project</title>
		<link rel="stylesheet" href="../../../../base.css" />
		<link rel="stylesheet" href="../../../../front.css" />
		<link rel="stylesheet" href="../../../../elem.css" />
		<link rel="stylesheet" href="../../../../csharp.css" />
		<link rel="stylesheet" href="../../../../TAB_styles.css" />
		<script type="text/javascript" src="../../../../mktree.js"></script>
		<script type="text/javascript" src="../../../../TAB_Function_Lib.js"></script>
		<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
	</head>

	<body>
<div id="topheader">
  <div id="maintitle">
	<h1> <a href="../../../../index.html" title="Castle Project Home" accesskey="1">Home</a> </h1>
	<h2> <a href="http://www.castlestronghold.com" title="Castle Stronghold: support, consulting and development">Castle Stronghold</a> </h2>
  </div>
  <div id="mainbar">
	<ul id="toplinks">
		<li>&nbsp;</li>
		<li><a style="_width: 70px;" href="../../../../index.html">Home</a></li>
		<li><a style="_width: 70px;" href="../../../../castle/download.html">Download</a></li>
		<li><a style="_width: 50px;" href="http://using.castleproject.org">Using</a></li>
		<li><a style="_width: 60px;" href="../../../../community/forum.html">Forum</a></li>
		<li><a style="_width: 120px;" href="../../../../jira.html">Issue Tracker</a></li>
		<li><a style="_width: 110px;" href="../../../../irc.html">IRC</a></li>
		<li><a style="_width: 110px;" href="http://builds.castleproject.org">Builds</a></li>
	</ul>
  </div>
</div>



<div id="coolpage">

	<div id="sidebar" >
		
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../monorail/index.html">MonoRail</a>
</span>
  <ul>
<li>
<a href="./../../../../monorail/gettingstarted/index.html">Getting started</a>
</li>
<li>
<a href="./../../../../monorail/faq.html">FAQ</a>
</li>
<li>
<a href="./../../../../monorail/recipes/index.html">Recipes</a>
</li>
<li>
<a href="./../../../../monorail/externalarticles.html">External Articles</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../monorail/documentation/trunk/index.html">Documentation</a>
</span>
  <ul>
<li>
<a href="./../../../../monorail/documentation/trunk/releasenotes/index.html">Release notes</a>
</li>
<li>
<a href="./../../../../monorail/documentation/trunk/manual/index.html">Reference Manual</a>
</li>
<li>
<a href="./../../../../monorail/documentation/trunk/usersguide/index.html">User's Guide</a>
</li>
<li>
<a href="./../../../../monorail/documentation/trunk/advanced/index.html">Advanced usage</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="darkmenu">
    <div class="darkmenucontent">
<span class="menutitle">
Navigation
</span>
  <ul>
<li>
<a href="./../../../../index.html">Back to Main Page</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
	<br/>
	
	</div>
		
	<div id="content">
	
		<div class="callout-pic">

<!-- Begin Table of contents -->
<div id="toc">
<h2>Table of contents</h2>
<ul>
<li class='toclevel-1'><a href="#simple"><span class="tocnumber">1</span> <span class="toctext">Simple binding</span></a>
<ul>
	<li class='toclevel-1'><a href="#date"><span class="tocnumber">1.1</span> <span class="toctext">Binding DateTime properties</span></a>
</li>
	<li class='toclevel-1'><a href="#nullables"><span class="tocnumber">1.2</span> <span class="toctext">Nullables</span></a>
</li>
	<li class='toclevel-1'><a href="#simplearrays"><span class="tocnumber">1.3</span> <span class="toctext">Array support</span></a>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="#databind"><span class="tocnumber">2</span> <span class="toctext">Using the DataBindAttribute</span></a>
<ul>
	<li class='toclevel-1'><a href="#nested"><span class="tocnumber">2.1</span> <span class="toctext">Nested objects</span></a>
</li>
	<li class='toclevel-1'><a href="#arrays"><span class="tocnumber">2.2</span> <span class="toctext">Arrays</span></a>
</li>
	<li class='toclevel-1'><a href="#generics"><span class="tocnumber">2.3</span> <span class="toctext">Generic Lists</span></a>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="#typessupported"><span class="tocnumber">3</span> <span class="toctext">Types supported</span></a>
</li>
<li class='toclevel-1'><a href="#formhelper"><span class="tocnumber">4</span> <span class="toctext">FormHelper</span></a>
</li>
</ul>
</div>
<!-- End Table of contents -->
		</div>

		<h1 class="firstHeading">
		    SmartDispatcherController
		</h1> 
	
<div class="breadcrumbs">
&raquo;
	<a href="./../../../../index.html">Home</a> 
&raquo;
	<a href="./../../../../monorail/index.html">MonoRail</a> 
&raquo;
	<a href="./../../../../monorail/documentation/index.html">Documentation</a> 
&raquo;
	<a href="./../../../../monorail/documentation/trunk/index.html">MonoRail trunk Documentation</a> 
&raquo;
	<a href="./../../../../monorail/documentation/trunk/usersguide/index.html">User's Guide</a> 
&raquo;
<u>SmartDispatcherController</u>
</div>

		<!-- start content -->
<p>
The <tt>SmartDispatcherController</tt> extends 
<tt>Controller</tt> class adding support for parameter 
binding. This allow you to bind parameters
from form elements to your action arguments. Overloads are also supported.
MonoRail will invoke the action that it can supply more parameters.
</p><p>
MonoRail is able to bind simple values and complex objects.
Both approaches are described in the sections below.
</p><a name="simple"></a>
  <h1>Simple binding</h1>
  <div class="download">
<div class="downloadborderleft">
<div class="downloadborderright">
<div class="filename">
<a href="./../../../../download/monorail/trunk/MonoRail.SimpleBindingSample.zip">MonoRail.SimpleBindingSample.zip</a> (7.02k)
</div>
</div></div></div>
<p>
	Consider the following html form:
	</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">form</span> <span class="attr">action</span><span class="kwrd">="/User/Search.rails"</span> <span class="attr">method</span><span class="kwrd">="post"</span><span class="kwrd">&gt;</span> 
    Name: <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="name"</span> <span class="kwrd">/&gt;</span> 
    Email: <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="email"</span> <span class="kwrd">/&gt;</span> 
    Country: 
    <span class="kwrd">&lt;</span><span class="html">select</span> <span class="attr">name</span><span class="kwrd">="country"</span><span class="kwrd">&gt;</span> 
        <span class="kwrd">&lt;</span><span class="html">option</span> <span class="attr">value</span><span class="kwrd">="44"</span><span class="kwrd">&gt;</span>England<span class="kwrd">&lt;/</span><span class="html">option</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">option</span> <span class="attr">value</span><span class="kwrd">="55"</span><span class="kwrd">&gt;</span>Brazil<span class="kwrd">&lt;/</span><span class="html">option</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">select</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="submit"</span> <span class="attr">value</span><span class="kwrd">="Search"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">form</span><span class="kwrd">&gt;</span>    
    </pre>
  <p>
	When this form is submitted, the following entries will be
	present on the <tt>Form</tt> dictionary:

<ul><li><tt>name</tt></li><li><tt>email</tt></li><li><tt>country</tt></li></ul></p><p>
	The standard way of getting those values on the controller is to
	use one of the dictionaries:
<ul><li><tt>Params</tt>: Has query string, form and environment entries</li><li><tt>Form</tt>: Has only form entries (method post)</li><li><tt>Query</tt>: Has only query string entries</li></ul></p><p>
	Having said that your action code could be the following:
	</p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

<span class="kwrd">public</span> <span class="kwrd">class</span> UserController : Controller
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> Search()
    {
        String name = Form[<span class="str">"name"</span>];
        String email = Form[<span class="str">"email"</span>];
        String country = Form[<span class="str">"country"</span>];
        
        <span class="rem">// Perform search ...</span>
    }
}
</pre>
  <p>
	Now if you switch to <tt>SmartDispatcherController</tt> 
	you would be able to use the following simpler code instead:
	</p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

<span class="kwrd">public</span> <span class="kwrd">class</span> UserController : SmartDispatcherController
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> Search(<span class="kwrd">string</span> name, <span class="kwrd">string</span> email, <span class="kwrd">string</span> country)
    {
        <span class="rem">// Perform search ...</span>
    }
}
</pre>
  <p>
	The <tt>SmartDispatcherController</tt>  is able
	to perform conversions (more on that below). 
	In this case if the value is not present
	(ie. it was not submitted), the argument will assume a default value.
	However, if the value was submitted, but could not be converted, 
	an exception will be thrown and the action will not be invoked.
	</p>  <div class="note">
<div class="notetopbg">
<div class="noteborderleft">
<div class="noteborderright">
<div class="notetopleft">
<div class="notetopright">
<div class="notebottomleft">
<div class="notebottomright">
<div class="boxtitle">Quick Note</div>
<div class="innercontent">
<p>
	Since the RC2 release empty strings are converted
	to <tt>null</tt> strings.
	</p>
</div></div></div></div></div></div></div></div></div>
<a name="date"></a>
  <h2>Binding DateTime properties</h2>
<p>
		To bind DateTime fields you can pass a single value
		or multiple values. Each of them will be a part of the DateTime struct.
		For example, using a single value:
		</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">form</span> <span class="attr">action</span><span class="kwrd">="SaveValues.rails"</span> <span class="attr">method</span><span class="kwrd">="post"</span><span class="kwrd">&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="dob"</span> <span class="attr">value</span><span class="kwrd">="1/1/2000"</span> <span class="kwrd">/&gt;</span> 
<span class="kwrd">&lt;/</span><span class="html">form</span><span class="kwrd">&gt;</span>    
    </pre>
  <p>
		Using multiple values:
		</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">form</span> <span class="attr">action</span><span class="kwrd">="SaveValues.rails"</span> <span class="attr">method</span><span class="kwrd">="post"</span><span class="kwrd">&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="dobday"</span> <span class="attr">value</span><span class="kwrd">="16"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="dobmonth"</span> <span class="attr">value</span><span class="kwrd">="7"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="dobyear"</span> <span class="attr">value</span><span class="kwrd">="1979"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="dobhour"</span> <span class="attr">value</span><span class="kwrd">="4"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="dobminute"</span> <span class="attr">value</span><span class="kwrd">="0"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="dobsecond"</span> <span class="attr">value</span><span class="kwrd">="0"</span> <span class="kwrd">/&gt;</span> 
<span class="kwrd">&lt;/</span><span class="html">form</span><span class="kwrd">&gt;</span>    </pre>
  <p>
		Regardless of the form approach, the controller action parameter
		will be the same:
		</p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

<span class="kwrd">public</span> <span class="kwrd">class</span> UserController : SmartDispatcherController
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> SaveValues(DateTime dob)
    {
        ...
    }
}</pre>
  <a name="nullables"></a>
  <h2>Nullables</h2>
<p>
		Nullables data types are also supported. They will only be populated if
		the values are present on the form and in non-empty fields.
		</p><a name="simplearrays"></a>
  <h2>Array support</h2>
<p>
	Arrays are also supported on the controller side.
	You can use two naming approaches on the form elements
	to make it work.
	</p><p>
	The first approach is to repeat the element name.
	For example:
	</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">form</span> <span class="attr">action</span><span class="kwrd">="SaveValues.rails"</span> <span class="attr">method</span><span class="kwrd">="post"</span><span class="kwrd">&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="name"</span> <span class="attr">value</span><span class="kwrd">="1"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="name"</span> <span class="attr">value</span><span class="kwrd">="2"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="name"</span> <span class="attr">value</span><span class="kwrd">="3"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="name"</span> <span class="attr">value</span><span class="kwrd">="4"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="name"</span> <span class="attr">value</span><span class="kwrd">="5"</span> <span class="kwrd">/&gt;</span> 
<span class="kwrd">&lt;/</span><span class="html">form</span><span class="kwrd">&gt;</span>    
    </pre>
  <p>
	The second approach is to use the 
	indexed value notation. The index value
	is meaningless to MonoRail, but it
	must be unique per element name. For example:
	</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">form</span> <span class="attr">action</span><span class="kwrd">="SaveValues.rails"</span> <span class="attr">method</span><span class="kwrd">="post"</span><span class="kwrd">&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="name[0]"</span> <span class="attr">value</span><span class="kwrd">="1"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="name[1]"</span> <span class="attr">value</span><span class="kwrd">="2"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="name[2]"</span> <span class="attr">value</span><span class="kwrd">="3"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="name[3]"</span> <span class="attr">value</span><span class="kwrd">="4"</span> <span class="kwrd">/&gt;</span> 
    <span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="name[4]"</span> <span class="attr">value</span><span class="kwrd">="5"</span> <span class="kwrd">/&gt;</span> 
<span class="kwrd">&lt;/</span><span class="html">form</span><span class="kwrd">&gt;</span>    
    </pre>
  <p>
	On the controller side, the parameter will 
	be the same independently of the approach
	in use. All you need to do is
	to use an array type:
	</p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

<span class="kwrd">public</span> <span class="kwrd">class</span> UserController : SmartDispatcherController
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> SaveValues(<span class="kwrd">string</span>[] name)
    {
        ...
    }
}
</pre>
  <a name="databind"></a>
  <h1>Using the DataBindAttribute</h1>
  <div class="download">
<div class="downloadborderleft">
<div class="downloadborderright">
<div class="filename">
<a href="./../../../../download/monorail/trunk/MonoRail.SimpleBindingSample.zip">MonoRail.SimpleBindingSample.zip</a> (7.02k)
</div>
</div></div></div>
<p>
	If instead of working with flat values you want to 
	populate an object, this is also possible using the <tt>DataBindAttribute</tt>.
	</p><p>
	The <tt>DataBindAttribute</tt> used the <tt>Castle.Component.Binder</tt>
	to instantiate and populate the target type. Simple values, nested objects
	and arrays are supported. As with simple binding, a name convention must
	be used on the form elements, so the binder can do its work.
	</p><p>
	First of all you must use a prefix which is required to avoid name clashing.
	It is as giving the form elements a name space. The form below uses
	<tt>product</tt> as a prefix:
	</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">form</span> <span class="attr">method</span><span class="kwrd">="post"</span> <span class="attr">action</span><span class="kwrd">="create.rails"</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product.id"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product.name"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="checkbox"</span> <span class="attr">name</span><span class="kwrd">="product.inStock"</span> <span class="attr">id</span><span class="kwrd">=" value="</span><span class="attr">true</span>" <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">form</span><span class="kwrd">&gt;</span>
</pre>
  <p>
	On the controller action you must specify the prefix as 
	the argument to the <tt>DataBindAttribute</tt>:
	</p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

<span class="kwrd">public</span> <span class="kwrd">class</span> ProductController : SmartDispatcherController
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> Create([DataBind(<span class="str">"product"</span>)] Product prod)
    {
    }
}</pre>
    <div class="note">
<div class="notetopbg">
<div class="noteborderleft">
<div class="noteborderright">
<div class="notetopleft">
<div class="notetopright">
<div class="notebottomleft">
<div class="notebottomright">
<div class="boxtitle">Quick Note</div>
<div class="innercontent">
<p>
	The parameter name (in the case above <tt>prod</tt>) 
	is not used by the binder and have no relation with 
	the prefix.
	</p>
</div></div></div></div></div></div></div></div></div>
<p>
	The binding of values happens with writable properties 
	only. Fields are never used. The <tt>Product</tt> class
	used on the example above would be:
	</p>    <pre class="csharpcode">

<span class="kwrd">public</span> <span class="kwrd">class</span> Product
{
    <span class="kwrd">private</span> <span class="kwrd">int</span> id;
    <span class="kwrd">private</span> String name;
    <span class="kwrd">private</span> <span class="kwrd">bool</span> inStock;
    
    <span class="kwrd">public</span> <span class="kwrd">int</span> Id
    {
        get { <span class="kwrd">return</span> id; }
        set { id = <span class="kwrd">value</span>; }
    }

    <span class="kwrd">public</span> <span class="kwrd">string</span> Name
    {
        get { <span class="kwrd">return</span> name; }
        set { name = <span class="kwrd">value</span>; }
    }

    <span class="kwrd">public</span> <span class="kwrd">bool</span> InStock
    {
        get { <span class="kwrd">return</span> inStock; }
        set { inStock = <span class="kwrd">value</span>; }
    }
}</pre>
    <div class="note">
<div class="notetopbg">
<div class="noteborderleft">
<div class="noteborderright">
<div class="notetopleft">
<div class="notetopright">
<div class="notebottomleft">
<div class="notebottomright">
<div class="boxtitle">Quick Note</div>
<div class="innercontent">
<p>
	Your class must have a default parameterless constructor.
	</p>
</div></div></div></div></div></div></div></div></div>
<a name="nested"></a>
  <h2>Nested objects</h2>
<p>
	Nested objects are supported with <b>no</b> deep limit.
	Suppose the <tt>Product</tt> class above included a
	<tt>SupplierInfo</tt>:
	</p>    <pre class="csharpcode">

<span class="kwrd">public</span> <span class="kwrd">class</span> Product
{
    <span class="kwrd">private</span> SupplierInfo supplierInfo;

    <span class="rem">// others fields omitted</span>
    
    <span class="kwrd">public</span> SupplierInfo SupplierInfo
    {
        get { <span class="kwrd">return</span> supplierInfo; }
        set { supplierInfo = <span class="kwrd">value</span>; }
    }

    <span class="rem">// others properties omitted</span>
}</pre>
  <p>
	The declaration of <tt>SupplierInfo</tt> follow. Note
	that it uses different types, including an enumerator.
	</p>    <pre class="csharpcode">

<span class="kwrd">public</span> <span class="kwrd">enum</span> WeightUnit
{
    Kilos,
    Pounds
}

<span class="kwrd">public</span> <span class="kwrd">class</span> SupplierInfo
{
    <span class="kwrd">private</span> String brand;
    <span class="kwrd">private</span> <span class="kwrd">float</span> weight;
    <span class="kwrd">private</span> WeightUnit weightUnit;
    <span class="kwrd">private</span> <span class="kwrd">int</span> warrantyInMonths;

    <span class="kwrd">public</span> <span class="kwrd">string</span> Brand
    {
        get { <span class="kwrd">return</span> brand; }
        set { brand = <span class="kwrd">value</span>; }
    }

    <span class="kwrd">public</span> <span class="kwrd">float</span> Weight
    {
        get { <span class="kwrd">return</span> weight; }
        set { weight = <span class="kwrd">value</span>; }
    }

    <span class="kwrd">public</span> WeightUnit WeightUnit
    {
        get { <span class="kwrd">return</span> weightUnit; }
        set { weightUnit = <span class="kwrd">value</span>; }
    }

    <span class="kwrd">public</span> <span class="kwrd">int</span> WarrantyInMonths
    {
        get { <span class="kwrd">return</span> warrantyInMonths; }
        set { warrantyInMonths = <span class="kwrd">value</span>; }
    }
}</pre>
  <p>
	When adding elements on the form, all you have
	to care is to include the property name. For the 
	case above it would be:
	</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">form</span> <span class="attr">method</span><span class="kwrd">="post"</span> <span class="attr">action</span><span class="kwrd">="create.rails"</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product.id"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product.name"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="checkbox"</span> <span class="attr">name</span><span class="kwrd">="product.inStock"</span> <span class="attr">id</span><span class="kwrd">=" value="</span><span class="attr">true</span>" <span class="kwrd">/&gt;</span>

<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product.supplierinfo.brand"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product.supplierinfo.Weight"</span>  <span class="kwrd">/&gt;</span>

<span class="kwrd">&lt;</span><span class="html">select</span> <span class="attr">name</span><span class="kwrd">="product.supplierinfo.WeightUnit"</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">option</span> <span class="attr">value</span><span class="kwrd">="Kilos"</span><span class="kwrd">&gt;</span>In Kg<span class="kwrd">&lt;/</span><span class="html">option</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">option</span> <span class="attr">value</span><span class="kwrd">="Pounds"</span><span class="kwrd">&gt;</span>In Pounds<span class="kwrd">&lt;/</span><span class="html">option</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">select</span><span class="kwrd">&gt;</span>

<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product.supplierinfo.WarrantyInMonths"</span> <span class="kwrd">/&gt;</span>
    
<span class="kwrd">&lt;/</span><span class="html">form</span><span class="kwrd">&gt;</span>
</pre>
  <p>
	The rule is <tt>prefixname.propertyname1.propertyname2...</tt>.
	The binder is not case sensitive.
	</p><a name="arrays"></a>
  <h2>Arrays</h2>
<p>
	There are two situations for array support. First, suppose
	instead of populating a single <tt>Product</tt> you would want 
	to populate a sequence of them. This demands two changes in 
	the example we have seen so far.
	</p><p>
	First the form elements must use the indexed notation discussed
	earlier:
	</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">form</span> <span class="attr">method</span><span class="kwrd">="post"</span> <span class="attr">action</span><span class="kwrd">="create.rails"</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product[0].id"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product[0].name"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="checkbox"</span> <span class="attr">name</span><span class="kwrd">="product[0].inStock"</span> <span class="attr">id</span><span class="kwrd">=" value="</span><span class="attr">true</span>" <span class="kwrd">/&gt;</span>

<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product[1].id"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product[1].name"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="checkbox"</span> <span class="attr">name</span><span class="kwrd">="product[1].inStock"</span> <span class="attr">id</span><span class="kwrd">=" value="</span><span class="attr">true</span>" <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">form</span><span class="kwrd">&gt;</span>
</pre>
  <p>
	Second, on the controller you must declare the parameter 
	as an array of <tt>Product</tt>s:
	</p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

<span class="kwrd">public</span> <span class="kwrd">class</span> ProductController : SmartDispatcherController
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> Create([DataBind(<span class="str">"product"</span>)] Product[] prods)
    {
    }
}</pre>
  <p>
	The rule is <tt>prefixname[uniqueindex].propertyname1.propertyname2...</tt>.
	The index must be a number, and the same number identifies 
	the same instance.
	</p><p>
	Another situation is when one or more properties of the 
	binding target are arrays. This case is also supported
	and not different from what we have seen. 
	</p><p>
	Being practical, suppose the <tt>Product</tt> 
	class in the example above included a <tt>Category</tt>
	array.
	</p>    <pre class="csharpcode">

<span class="kwrd">public</span> <span class="kwrd">class</span> Product
{
    <span class="kwrd">private</span> Category[] categories;

    <span class="rem">// others fields omitted</span>
    
    <span class="kwrd">public</span> Category[] Categories
    {
        get { <span class="kwrd">return</span> categories; }
        set { categories = <span class="kwrd">value</span>; }
    }

    <span class="rem">// others properties omitted</span>
}</pre>
  <p>
	It could also be an array of simple values like <tt>String</tt>s or <tt>int</tt>s
	and the solution would be the same.
	The declaration of the <tt>Category</tt> follows:
	</p>    <pre class="csharpcode">

<span class="kwrd">public</span> <span class="kwrd">class</span> Category
{
    <span class="kwrd">private</span> String name;

    <span class="kwrd">public</span> <span class="kwrd">string</span> Name
    {
        get { <span class="kwrd">return</span> name; }
        set { name = <span class="kwrd">value</span>; }
    }
}</pre>
  <p>
	One more time the solution lies on the element names on 
	the form. The property name must be used in the indexed
	notation:
	</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">form</span> <span class="attr">method</span><span class="kwrd">="post"</span> <span class="attr">action</span><span class="kwrd">="create.rails"</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product.id"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="text"</span> <span class="attr">name</span><span class="kwrd">="product.name"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="checkbox"</span> <span class="attr">name</span><span class="kwrd">="product.inStock"</span> <span class="attr">id</span><span class="kwrd">=" value="</span><span class="attr">true</span>" <span class="kwrd">/&gt;</span>

<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="checkbox"</span> <span class="attr">name</span><span class="kwrd">="product.categories[0].name"</span> <span class="attr">value</span><span class="kwrd">="Kitchen"</span> <span class="kwrd">/&gt;</span> 
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="checkbox"</span> <span class="attr">name</span><span class="kwrd">="product.categories[1].name"</span> <span class="attr">value</span><span class="kwrd">="Bedroom"</span> <span class="kwrd">/&gt;</span> 
<span class="kwrd">&lt;</span><span class="html">input</span> <span class="attr">type</span><span class="kwrd">="checkbox"</span> <span class="attr">name</span><span class="kwrd">="product.categories[2].name"</span> <span class="attr">value</span><span class="kwrd">="Living-room"</span> <span class="kwrd">/&gt;</span> 
<span class="kwrd">&lt;/</span><span class="html">form</span><span class="kwrd">&gt;</span>
</pre>
  <p>
	The rule is this case would be <tt>prefixname.propertyname1[uniqueindex].propertyname2...</tt>.
	</p><a name="generics"></a>
  <h2>Generic Lists</h2>
<p>Generic Lists are supported and the behavior is the same of the arrays, expect the property declaration of course.</p>    <pre class="csharpcode">

<span class="kwrd">public</span> <span class="kwrd">class</span> Product
{
    <span class="kwrd">private</span> List&lt;Category&gt; categories;

    <span class="rem">// others fields omitted</span>
    
    <span class="kwrd">public</span> List&lt;Category&gt; Categories
    {
        get { <span class="kwrd">return</span> categories; }
        set { categories = <span class="kwrd">value</span>; }
    }

    <span class="rem">// others properties omitted</span>
}</pre>
  <a name="typessupported"></a>
  <h1>Types supported</h1>
<p>
	The following types are natively supported by the <tt>DataBinder</tt> component:
	</p><p><table class="commontable" ><tr><th>Type name</th><th>Note</th></tr><tr><td>String</td><td>Empty fields are converted to null strings</td></tr><tr><td>All types where <tt>IsPrimitive</tt> returns true</td><td>-</td></tr><tr><td>Enum</td><td>It is converted using the name or value. Flags are also supported</td></tr><tr><td>Decimal</td><td>-</td></tr><tr><td>Guid</td><td>-</td></tr><tr><td>DateTime</td><td>The implementation checks for the key plus <tt>day</tt>, 
		<tt>month</tt>, <tt>year</tt>, <tt>hour</tt>, <tt>minute</tt> and <tt>second</tt>. 
		If none elements is found, 
		it falls back to use <tt>DateTime.Parse</tt> 
		on the value associated with the key.</td></tr><tr><td>Array</td><td>-</td></tr><tr><td>Generic Lists</td><td>-</td></tr><tr><td>HttpPostedFile</td><td>-</td></tr><tr><td>TypeConverter</td><td>If the type is not within the range above, the converter checks
		for a TypeConverter associated with it that is able to convert
		from a string.
		</td></tr></table></p><a name="formhelper"></a>
  <h1>FormHelper</h1>
<p>
	The <tt>FormHelper</tt> was created
	to act together with the binder. It is able
	to create form elements with the right names
	and to obtain the existing value (if possible)
	saving you from populating the elements manually.
	</p><p>
	For more on the FormHelper visit the Helpers
	documentation pages.
	</p>		<!-- end content -->
		
	<div id="footer">
	Found an error? Something inaccurate? 
	<a href="../../../../community/getinvolved.html">Help us improve the documentation</a> <br/>
	Generated by <a href="../../../../others/anakia/index.html">Castle Anakia</a>. 
	
	<p>&nbsp;</p>
	
	<p>
	Sponsored by <img src="../../../../images/logothumb.gif" /> <a href="http://www.castlestronghold.com">Castle Stronghold</a>.
	</p>
	
	</div>

	<!-- Search Google -->
<center>
<FORM method=GET action="http://www.google.com/custom">
<TABLE bgcolor="#FFFFFF" cellspacing="4" border="0" style="border: solid 1px gray;" align="center">
<tr valign=top><td>
<A HREF="http://www.google.com/search">
<IMG SRC="http://www.google.com/logos/Logo_40wht.gif" border=0 ALT=Google align=middle></A>
</td>
<td>
<INPUT TYPE=text name=q size=31 maxlength=255 value="">
<INPUT type=submit name=sa VALUE="Google Search">
<INPUT type=hidden name=cof VALUE="S:http://www.castlestronghold.com;GL:1;VLC:#373737;AH:center;LH:63;LC:#0A50A1;GFNT:#5B5B5B;L:http://www.castleproject.org/images/castle-logo.gif;ALC:#0A50A1;BIMG:http://www.castleproject.org/images/bg.png;LW:280;T:#5B5B5B;AWFID:3d565acacdd9f388;">
<input type=hidden name=domains value="castleproject.org"><br><input type=radio name=sitesearch value=""> Search WWW <input type=radio name=sitesearch value="castleproject.org" checked> Search castleproject.org
</td></tr></TABLE>
</FORM>
<!-- Search Google -->
</center>
	&nbsp;
	<br/>

		</div> <!-- end of content -->
  </div><!-- end of page -->
  


	<script type="text/javascript">_uacct = "UA-1190612-1";urchinTracker();</script>
	</body>
</html>
