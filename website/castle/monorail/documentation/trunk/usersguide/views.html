<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">









<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
		<title>Working with Views :: Castle Project</title>
		<link rel="stylesheet" href="../../../../base.css" />
		<link rel="stylesheet" href="../../../../front.css" />
		<link rel="stylesheet" href="../../../../elem.css" />
		<link rel="stylesheet" href="../../../../csharp.css" />
		<link rel="stylesheet" href="../../../../TAB_styles.css" />
		<script type="text/javascript" src="../../../../mktree.js"></script>
		<script type="text/javascript" src="../../../../TAB_Function_Lib.js"></script>
		<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
	</head>

	<body>
<div id="topheader">
  <div id="maintitle">
	<h1> <a href="../../../../index.html" title="Castle Project Home" accesskey="1">Home</a> </h1>
	<h2> <a href="http://www.castlestronghold.com" title="Castle Stronghold: support, consulting and development">Castle Stronghold</a> </h2>
  </div>
  <div id="mainbar">
	<ul id="toplinks">
		<li>&nbsp;</li>
		<li><a style="_width: 70px;" href="../../../../index.html">Home</a></li>
		<li><a style="_width: 70px;" href="../../../../castle/projects.html">Projects</a></li>
		<li><a style="_width: 70px;" href="../../../../castle/download.html">Downloads</a></li>
		<li><a href="#" onclick="UserVoice.Popin.show(); return false;" title="Uservoice Feedback">Feedback</a></li>
		<li><a style="_width: 110px;" href="http://api.castleproject.org">API Doc</a></li>
		<li><a style="_width: 50px;" href="http://using.castleproject.org">Using</a></li>
		<li><a style="_width: 60px;" href="../../../../community/mailinglists.html">Mailing Lists</a></li>
		<li><a style="_width: 120px;" href="../../../../issuetracker.html">Issue Tracker</a></li>
		<li><a style="_width: 110px;" href="http://builds.castleproject.org">Builds</a></li>
	</ul>
  </div>
</div>



<div id="coolpage">

	<div id="sidebar" >
		
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../monorail/index.html">MonoRail</a>
</span>
  <ul>
<li>
<a href="./../../../../monorail/gettingstarted/index.html">Getting started</a>
</li>
<li>
<a href="./../../../../monorail/faq.html">FAQ</a>
</li>
<li>
<a href="./../../../../monorail/recipes/index.html">Recipes</a>
</li>
<li>
<a href="./../../../../monorail/externalarticles.html">External Articles</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../monorail/documentation/trunk/index.html">Documentation</a>
</span>
  <ul>
<li>
<a href="./../../../../monorail/documentation/trunk/releasenotes/index.html">Release notes</a>
</li>
<li>
<a href="./../../../../monorail/documentation/trunk/manual/index.html">Reference Manual</a>
</li>
<li>
<a href="./../../../../monorail/documentation/trunk/usersguide/index.html">User's Guide</a>
</li>
<li>
<a href="./../../../../monorail/documentation/trunk/advanced/index.html">Advanced usage</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="darkmenu">
    <div class="darkmenucontent">
<span class="menutitle">
Navigation
</span>
  <ul>
<li>
<a href="./../../../../index.html">Back to Main Page</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
	<br/>
	
	</div>
		
	<div id="content">
	
		<div class="callout-pic">

<!-- Begin Table of contents -->
<div id="toc">
<h2>Table of contents</h2>
<ul>
<li class='toclevel-1'><a href="#folderstructureconvention"><span class="tocnumber">1</span> <span class="toctext">Folder structure convention</span></a>
</li>
<li class='toclevel-1'><a href="#selectingaviewtorender"><span class="tocnumber">2</span> <span class="toctext">Selecting a view to render</span></a>
</li>
<li class='toclevel-1'><a href="#propbag"><span class="tocnumber">3</span> <span class="toctext">Passing parameters to the view</span></a>
</li>
<li class='toclevel-1'><a href="#shared"><span class="tocnumber">4</span> <span class="toctext">Shared views</span></a>
</li>
<li class='toclevel-1'><a href="#cancelling"><span class="tocnumber">5</span> <span class="toctext">Cancelling a view</span></a>
</li>
</ul>
</div>
<!-- End Table of contents -->
		</div>

		<h1 class="firstHeading">
		    Working with Views
		</h1> 
	
<div class="breadcrumbs">
&raquo;
	<a href="./../../../../index.html">Home</a> 
&raquo;
	<a href="./../../../../monorail/index.html">MonoRail</a> 
&raquo;
	<a href="./../../../../monorail/documentation/index.html">Documentation</a> 
&raquo;
	<a href="./../../../../monorail/documentation/trunk/index.html">MonoRail trunk Documentation</a> 
&raquo;
	<a href="./../../../../monorail/documentation/trunk/usersguide/index.html">User's Guide</a> 
&raquo;
<u>Working with Views</u>
</div>

		<!-- start content -->
<p>
	From the MonoRail perspective the view is in charge of presenting
	the data supplied by the controller. The controller is not aware of
	how the view is implemented, nor the underlying view engine you 
	chose. 
	This is intentional and is what separation of concerns is all about.
	</p><a name="folderstructureconvention"></a>
  <h1>Folder structure convention</h1>
<p>
	There must be a folder for the views. Each subfolder should be named after
	the controller's name. If the controller is associated with an area, that must be
	reflected in the folder structure as well.
	</p><p><img src="./../../../../images/monorail/views_folder.gif" ></img></p><a name="selectingaviewtorender"></a>
  <h1>Selecting a view to render</h1>
<p>
	When an action is invoked, MonoRail pre-selects the action name 
	as the view to be rendered. For example:
	</p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

<span class="kwrd">public</span> <span class="kwrd">class</span> CustomerController : Controller
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> Index()
    {
    }
}</pre>
  <p>
	If the action <tt>Index</tt> is invoked (from a client's browser)
	the <tt>views\customer\index</tt> view file will be preselected.
	</p>  <div class="note">
<div class="notetopbg">
<div class="noteborderleft">
<div class="noteborderright">
<div class="notetopleft">
<div class="notetopright">
<div class="notebottomleft">
<div class="notebottomright">
<div class="boxtitle">Quick Note</div>
<div class="innercontent">
<p>
	MonoRail will never use file extensions in the controller
	to define the view to be rendered. Every View Engine
	uses a different file extension, but that is not reflected
	on the controller's code.
	</p>
</div></div></div></div></div></div></div></div></div>
<p>
	If instead of sending the <tt>views\customer\index</tt> view
	the programmer wanted to send a different view, they could use
	the <tt>RenderView</tt> method which selects a different view.
	</p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

<span class="kwrd">public</span> <span class="kwrd">class</span> CustomerController : Controller
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> Index()
    {
        RenderView(<span class="str">"welcome"</span>);
    }
}</pre>
  <p>
	The code above will select a view file located at <tt>views\customer\welcome</tt>.
	</p>  <div class="warning">
<div class="warningtopbg">
<div class="warningborderleft">
<div class="warningborderright">
<div class="warningtopleft">
<div class="warningtopright">
<div class="warningbottomleft">
<div class="warningbottomright">
	<div class="boxtitle">Warning</div>
<div class="innercontent">
<p>
	The view is not processed when <tt>RenderView</tt> is invoked.
	It simply defines the name of the view to be used for the current action.
  Code continues executing after <tt>RenderView</tt> is called and the view will
  be processed after the action completes.
	</p>
</div></div></div></div></div></div></div></div></div>
<a name="propbag"></a>
  <h1>Passing parameters to the view</h1>
<p>
	You would probably want to supply data to
	the view so it can generate dynamic content. 
	This should be done using the <tt>PropertyBag</tt>.
	For example:
	</p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

<span class="kwrd">public</span> <span class="kwrd">class</span> TestController : Controller
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> ShowTime()
    {
        PropertyBag[<span class="str">"now"</span>] = DateTime.Now;
    }
}</pre>
  <p>
	The <tt>PropertyBag</tt> is a dictionary. Every
	View Engine uses an approach to make the data available 
	to the view. Using NVelocity View Engine as an example, the data 
	will be present as a context variable. The following is a 
	small NVelocity template example:
	</p>    <pre class="csharpcode">

&lt;html&gt;
Hello, the time now <span class="kwrd">is</span> $now
&lt;/html&gt;
</pre>
  <p>To see a list of variables available within the NVelocity view engine please see the <a href="../viewengines/nvelocity/variables.html" >NVelocityViewEngine documentation</a>.</p><a name="shared"></a>
  <h1>Shared views</h1>
<p>
	Some views could be shared among controllers, or you might want to 
	render a view from another controller. For those cases, use 
	<tt>RenderSharedView</tt></p>    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

<span class="kwrd">public</span> <span class="kwrd">class</span> CustomerController : Controller
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> Index()
    {
        RenderSharedView(<span class="str">"common/welcome"</span>);
    }
}</pre>
  <p>
	The code above will select a view file located at <tt>views\common\welcome</tt>.
	</p><a name="cancelling"></a>
  <h1>Cancelling a view</h1>
<p>
	Although it might sound strange, there are situation were you do not 
	want any view processing to take place. For those cases, use the
	<tt>CancelView</tt> method.
		    <pre class="csharpcode">

<span class="kwrd">using</span> Castle.MonoRail.Framework;

<span class="kwrd">public</span> <span class="kwrd">class</span> CustomerController : Controller
{
    <span class="kwrd">public</span> <span class="kwrd">void</span> Index()
    {
        CancelView();
    }
}</pre>
  </p>		<!-- end content -->
		
	<div id="footer">
<script type="text/javascript"><!--
google_ad_client = "pub-2091974950947714";
/* 728x90, created 2/13/08 */
google_ad_slot = "5378217716";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
	
	<br/>
	Found an error? Something inaccurate? 
	<a href="../../../../community/getinvolved.html">Help us improve the documentation</a> <br/>
	Generated by <a href="../../../../others/anakia/index.html">Castle Anakia</a>. 
	
	<p>&nbsp;</p>
	
	<p>
	Sponsored by <img src="../../../../images/logothumb.gif" /> <a href="http://www.castlestronghold.com">Castle Stronghold</a>.
	</p>
	
	</div>

	<!-- Search Google -->
<center>
<FORM method=GET action="http://www.google.com/custom">
<TABLE bgcolor="#FFFFFF" cellspacing="4" border="0" style="border: solid 1px gray;" align="center">
<tr valign=top><td>
<A HREF="http://www.google.com/search">
<IMG SRC="http://www.google.com/logos/Logo_40wht.gif" border=0 ALT=Google align=middle></A>
</td>
<td>
<INPUT TYPE=text name=q size=31 maxlength=255 value="">
<INPUT type=submit name=sa VALUE="Google Search">
<INPUT type=hidden name=cof VALUE="S:http://www.castlestronghold.com;GL:1;VLC:#373737;AH:center;LH:63;LC:#0A50A1;GFNT:#5B5B5B;L:http://www.castleproject.org/images/castle-logo.gif;ALC:#0A50A1;BIMG:http://www.castleproject.org/images/bg.png;LW:280;T:#5B5B5B;AWFID:3d565acacdd9f388;">
<input type=hidden name=domains value="castleproject.org"><br><input type=radio name=sitesearch value=""> Search WWW <input type=radio name=sitesearch value="castleproject.org" checked> Search castleproject.org
</td></tr></TABLE>
</FORM>
<!-- Search Google -->
</center>
	&nbsp;
	<br/>

		</div> <!-- end of content -->
  </div><!-- end of page -->
  


	<script type="text/javascript">_uacct = "UA-1190612-1";urchinTracker();</script>
	<script type="text/javascript">
		var uservoiceJsHost = ("https:" == document.location.protocol) ? "https://uservoice.com" : "http://cdn.uservoice.com";
		document.write(unescape("%3Cscript src='" + uservoiceJsHost + "/javascripts/widgets/tab.js' type='text/javascript'%3E%3C/script%3E"))
	</script>
	<script type="text/javascript">
		UserVoice.Popin.setup({ 
			key: 'castle',
			alignment: 'right',
			host: 'castle.uservoice.com', 
			forum: 'general', 
			lang: 'en'
		})
	</script>
	</body>
</html>
