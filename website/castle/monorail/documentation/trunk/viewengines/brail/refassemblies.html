<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">









<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
		<title>Referencing your assemblies and automatically importing namespaces :: Castle Project</title>
		<link rel="stylesheet" href="../../../../../base.css" />
		<link rel="stylesheet" href="../../../../../front.css" />
		<link rel="stylesheet" href="../../../../../elem.css" />
		<link rel="stylesheet" href="../../../../../csharp.css" />
		<link rel="stylesheet" href="../../../../../TAB_styles.css" />
		<script type="text/javascript" src="../../../../../mktree.js"></script>
		<script type="text/javascript" src="../../../../../TAB_Function_Lib.js"></script>
		<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
	</head>

	<body>
<div id="topheader">
  <div id="maintitle">
	<h1> <a href="../../../../../index.html" title="Castle Project Home" accesskey="1">Home</a> </h1>
	<h2> <a href="http://www.castlestronghold.com" title="Castle Stronghold: support, consulting and development">Castle Stronghold</a> </h2>
  </div>
  <div id="mainbar">
	<ul id="toplinks">
		<li>&nbsp;</li>
		<li><a style="_width: 70px;" href="../../../../../index.html">Home</a></li>
		<li><a style="_width: 70px;" href="../../../../../castle/download.html">Download</a></li>
		<li><a style="_width: 110px;" href="http://api.castleproject.org">API Doc</a></li>
		<li><a style="_width: 50px;" href="http://using.castleproject.org">Using</a></li>
		<li><a style="_width: 60px;" href="../../../../../community/forum.html">Forum</a></li>
		<li><a style="_width: 120px;" href="../../../../../jira.html">Jira/Issue tracker</a></li>
		<li><a style="_width: 110px;" href="http://builds.castleproject.org">Builds</a></li>
	</ul>
  </div>
</div>



<div id="coolpage">

	<div id="sidebar" >
		
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../../monorail/index.html">MonoRail</a>
</span>
  <ul>
<li>
<a href="./../../../../../monorail/gettingstarted/index.html">Getting started</a>
</li>
<li>
<a href="./../../../../../monorail/faq.html">FAQ</a>
</li>
<li>
<a href="./../../../../../monorail/recipes/index.html">Recipes</a>
</li>
<li>
<a href="./../../../../../monorail/externalarticles.html">External Articles</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../../monorail/documentation/trunk/index.html">Documentation</a>
</span>
  <ul>
<li>
<a href="./../../../../../monorail/documentation/trunk/releasenotes/index.html">Release notes</a>
</li>
<li>
<a href="./../../../../../monorail/documentation/trunk/manual/index.html">Reference Manual</a>
</li>
<li>
<a href="./../../../../../monorail/documentation/trunk/usersguide/index.html">User's Guide</a>
</li>
<li>
<a href="./../../../../../monorail/documentation/trunk/advanced/index.html">Advanced usage</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="darkmenu">
    <div class="darkmenucontent">
<span class="menutitle">
Navigation
</span>
  <ul>
<li>
<a href="./../../../../../index.html">Back to Main Page</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
	<br/>
	
	</div>
		
	<div id="content">
	
		<div class="callout-pic">

<!-- Begin Table of contents -->
<div id="toc">
<h2>Table of contents</h2>
<ul>
<li class='toclevel-1'><a href="#ReferenceAssembly"><span class="tocnumber">1</span> <span class="toctext">Referencing Assemblies</span></a>
</li>
<li class='toclevel-1'><a href="#AutoImport"><span class="tocnumber">2</span> <span class="toctext">Auto Imports</span></a>
</li>
</ul>
</div>
<!-- End Table of contents -->
		</div>

		<h1 class="firstHeading">
		    Referencing your assemblies and automatically importing namespaces
		</h1> 
	
<div class="breadcrumbs">
&raquo;
	<a href="./../../../../../index.html">Home</a> 
&raquo;
	<a href="./../../../../../monorail/index.html">MonoRail</a> 
&raquo;
	<a href="./../../../../../monorail/documentation/index.html">Documentation</a> 
&raquo;
	<a href="./../../../../../monorail/documentation/trunk/index.html">MonoRail trunk Documentation</a> 
&raquo;
	<a href="./../../../../../monorail/documentation/trunk/viewengines/index.html">View Engines</a> 
&raquo;
	<a href="./../../../../../monorail/documentation/trunk/viewengines/brail/index.html">Brail View Engine</a> 
&raquo;
<u>Referencing your assemblies and automatically importing namespaces</u>
</div>

		<!-- start content -->
<a name="ReferenceAssembly"></a>
  <h1>Referencing Assemblies</h1>
<p>
Consider the following this code:
</p>    <pre class="csharpcode">

<span class="asp">&lt;%</span>
<span class="kwrd">for</span> user <span class="kwrd">in</span> users:
    output <span class="str">"&lt;p&gt;${user.Name} - ${user.Email}&lt;/p&gt;"</span>
end
<span class="asp">%&gt;</span>
</pre>
  <p>
Looks simple, right? The problem is that Brail doesn't really know what <tt>user</tt> is, so it uses reflection to get the values of the <tt>Name</tt> and <tt>Email</tt> properties. This is, of course, quite expensive in performance terms. What is the solution? You need to tell Brail to add a reference to the assembly where <tt>User</tt> is defined. You can do that by adding this line to your <tt>web.config</tt> file (see the full configuration section below for more details).
</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">Brail</span><span class="kwrd">&gt;</span>
     <span class="kwrd">&lt;</span><span class="html">reference</span> <span class="attr">assembly</span><span class="kwrd">="assembly.with.user.object"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">Brail</span><span class="kwrd">&gt;</span></pre>
  <p>
And then, in your view code, you write:
</p>    <pre class="csharpcode">

<span class="asp">&lt;%</span>
import My.Models
<span class="asp">%&gt;</span>
<span class="kwrd">&lt;!</span><span class="html">--</span> <span class="attr">lots</span> <span class="attr">of</span> <span class="attr">html</span> <span class="attr">code</span> <span class="attr">-</span><span class="kwrd">&gt;</span>
<span class="asp">&lt;%</span>
<span class="kwrd">for</span> user <span class="kwrd">as</span> User <span class="kwrd">in</span> users:
    output <span class="str">"&lt;p&gt;${user.Name} - ${user.Email}&lt;/p&gt;"</span>
end
<span class="asp">%&gt;</span></pre>
  <p>
You can also use this out side of loops, in order to get strong typing (and the assoicated performance benefits):
    <pre class="csharpcode">

<span class="asp">&lt;%</span>
import My.Models
<span class="asp">%&gt;</span>
<span class="kwrd">&lt;!</span><span class="html">--</span> <span class="attr">lots</span> <span class="attr">of</span> <span class="attr">html</span> <span class="attr">code</span> <span class="attr">-</span><span class="kwrd">&gt;</span>
<span class="asp">&lt;%</span>
# define a parameter called user of type User
user <span class="kwrd">as</span> User = GetParameter(<span class="str">"user"</span>)
# now it uses strong typing, instead of reflection
output <span class="str">"&lt;p&gt;${user.Name} - ${user.Email}&lt;/p&gt;"</span>
<span class="asp">%&gt;</span></pre>
  </p><p>
With this simple change, you've completely eliminated the use of reflection and probably increased by a fair margin your application performance.
However, because it significantly increases the complexity of developing the views, it is not really the recommended approach. If you run into a situation where the cost of reflection in the views is a significant one, there are other options, which involve improving dynamic dispatch inside of Brail, bringing you the benefits without the cost. This is not implemented currently, because so far we have not run into a situation where this was a problem that warranted the additional complexity.
</p>  <div class="note">
<div class="notetopbg">
<div class="noteborderleft">
<div class="noteborderright">
<div class="notetopleft">
<div class="notetopright">
<div class="notebottomleft">
<div class="notebottomright">
<div class="boxtitle">Quick Note</div>
<div class="innercontent">
<p>
Beyond making the view code more complex, this can affect the ability to use some of the nicer abilities on Brail, such as ignoring null references using the IgnorNull proxy.
</p>
</div></div></div></div></div></div></div></div></div>
<a name="AutoImport"></a>
  <h1>Auto Imports</h1>
<p>
As you can imagine, it can get tiresome to specify the default imports all over the place, Brail supports automatic imports from the configuration.
All you need to do is specify the following in the <tt>web.config</tt> file:
</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">Brail</span><span class="kwrd">&gt;</span>
         <span class="kwrd">&lt;</span><span class="html">import</span> <span class="attr">namespace</span><span class="kwrd">="My.Models"</span><span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">Brail</span><span class="kwrd">&gt;</span></pre>
  <p>
And it will be added for you by Brail.
</p>		<!-- end content -->
		
	<div id="footer">
<script type="text/javascript"><!--
google_ad_client = "pub-2091974950947714";
/* 728x90, created 2/13/08 */
google_ad_slot = "5378217716";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

	Found an error? Something inaccurate? 
	<a href="../../../../../community/getinvolved.html">Help us improve the documentation</a> <br/>
	Generated by <a href="../../../../../others/anakia/index.html">Castle Anakia</a>. 
	
	<p>&nbsp;</p>
	
	<p>
	Sponsored by <img src="../../../../../images/logothumb.gif" /> <a href="http://www.castlestronghold.com">Castle Stronghold</a>.
	</p>
	
	</div>

	<!-- Search Google -->
<center>
<FORM method=GET action="http://www.google.com/custom">
<TABLE bgcolor="#FFFFFF" cellspacing="4" border="0" style="border: solid 1px gray;" align="center">
<tr valign=top><td>
<A HREF="http://www.google.com/search">
<IMG SRC="http://www.google.com/logos/Logo_40wht.gif" border=0 ALT=Google align=middle></A>
</td>
<td>
<INPUT TYPE=text name=q size=31 maxlength=255 value="">
<INPUT type=submit name=sa VALUE="Google Search">
<INPUT type=hidden name=cof VALUE="S:http://www.castlestronghold.com;GL:1;VLC:#373737;AH:center;LH:63;LC:#0A50A1;GFNT:#5B5B5B;L:http://www.castleproject.org/images/castle-logo.gif;ALC:#0A50A1;BIMG:http://www.castleproject.org/images/bg.png;LW:280;T:#5B5B5B;AWFID:3d565acacdd9f388;">
<input type=hidden name=domains value="castleproject.org"><br><input type=radio name=sitesearch value=""> Search WWW <input type=radio name=sitesearch value="castleproject.org" checked> Search castleproject.org
</td></tr></TABLE>
</FORM>
<!-- Search Google -->
</center>
	&nbsp;
	<br/>

		</div> <!-- end of content -->
  </div><!-- end of page -->
  


	<script type="text/javascript">_uacct = "UA-1190612-1";urchinTracker();</script>
	</body>
</html>
