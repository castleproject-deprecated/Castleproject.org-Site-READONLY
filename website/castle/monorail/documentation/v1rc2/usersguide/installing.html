<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">









<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
		<title>Installing MonoRail :: Castle Project</title>
		<link rel="stylesheet" href="../../../../base.css" />
		<link rel="stylesheet" href="../../../../front.css" />
		<link rel="stylesheet" href="../../../../elem.css" />
		<link rel="stylesheet" href="../../../../csharp.css" />
		<link rel="stylesheet" href="../../../../TAB_styles.css" />
		<script type="text/javascript" src="../../../../mktree.js"></script>
		<script type="text/javascript" src="../../../../TAB_Function_Lib.js"></script>
	</head>

	<body>
<div id="topheader">
  <div id="maintitle">
	<h1> <a href="../../../../index.html" title="Castle Project Home" accesskey="1">Home</a> </h1>
	<h2> <a href="http://www.castlestronghold.com" title="Castle Stronghold: support, consulting and development">Castle Stronghold</a> </h2>
  </div>
  <div id="mainbar">
	<ul id="toplinks">
		<li>&nbsp;</li>
		<li><a style="_width: 70px;" href="../../../../index.html">Home</a></li>
		<li><a style="_width: 70px;" href="../../../../castle/download.html">Download</a></li>
		<li><a style="_width: 50px;" href="http://wiki.castleproject.org">Wiki</a></li>
		<li><a style="_width: 60px;" href="../../../../community/forum.html">Forum</a></li>
		<li><a style="_width: 120px;" href="../../../../jira.html">Issue Tracker</a></li>
		<li><a style="_width: 110px;" href="../../../../irc.html">IRC Channel</a></li>
		<li><a style="_width: 110px;" href="http://builds.castleproject.org">Build Server</a></li>
	</ul>
  </div>
</div>



<div id="coolpage">

	<div id="sidebar" >
		
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../monorail/index.html">MonoRail</a>
</span>
  <ul>
<li>
<a href="./../../../../monorail/gettingstarted/index.html">Getting started</a>
</li>
<li>
<a href="./../../../../monorail/faq.html">FAQ</a>
</li>
<li>
<a href="./../../../../monorail/recipes/index.html">Recipes</a>
</li>
<li>
<a href="./../../../../monorail/externalarticles.html">External Articles</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../monorail/documentation/v1rc2/index.html">Documentation</a>
</span>
  <ul>
<li>
<a href="./../../../../monorail/documentation/v1rc2/releasenotes/index.html">Release notes</a>
</li>
<li>
<a href="./../../../../monorail/documentation/v1rc2/manual/index.html">Reference Manual</a>
</li>
<li>
<a href="./../../../../monorail/documentation/v1rc2/usersguide/index.html">User's Guide</a>
</li>
<li>
<a href="./../../../../monorail/documentation/v1rc2/advanced/index.html">Advanced usage</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="darkmenu">
    <div class="darkmenucontent">
<span class="menutitle">
Navigation
</span>
  <ul>
<li>
<a href="./../../../../index.html">Back to Main Page</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
	<br/>
	
	</div>
		
	<div id="content">
	
		<div class="callout-pic">

<!-- Begin Table of contents -->
<div id="toc">
<h2>Table of contents</h2>
<ul>
<li class='toclevel-1'><a href="#Internet_Information_Services"><span class="tocnumber">1</span> <span class="toctext">Installing on Internet Information Services</span></a>
<ul>
	<li class='toclevel-1'><span class="tocnumber">1.1</span> <span class="toctext">First step: open the IIS MMC</span>
</li>
	<li class='toclevel-1'><span class="tocnumber">1.2</span> <span class="toctext">Second step: open the web site configuration</span>
</li>
	<li class='toclevel-1'><span class="tocnumber">1.3</span> <span class="toctext">Third step: associate the file extension</span>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="#Cassini"><span class="tocnumber">2</span> <span class="toctext">Running with Cassini</span></a>
</li>
<li class='toclevel-1'><a href="#XSP"><span class="tocnumber">3</span> <span class="toctext">Mono and XSP</span></a>
</li>
<li class='toclevel-1'><a href="#ApacheMono"><span class="tocnumber">4</span> <span class="toctext">Running with Apache/Mono</span></a>
<ul>
	<li class='toclevel-1'><span class="tocnumber">4.1</span> <span class="toctext">Configuring Apache</span>
</li>
	<li class='toclevel-1'><span class="tocnumber">4.2</span> <span class="toctext">Deploying the application</span>
</li>
</ul>
</li>
<li class='toclevel-1'><a href="#DeployingToSharedHost"><span class="tocnumber">5</span> <span class="toctext">Deploying to a shared host</span></a>
</li>
</ul>
</div>
<!-- End Table of contents -->
		</div>

		<h1 class="firstHeading">
		    Installing MonoRail
		</h1> 
	
<div class="breadcrumbs">
&raquo;
	<a href="./../../../../index.html">Home</a> 
&raquo;
	<a href="./../../../../monorail/index.html">MonoRail</a> 
&raquo;
	<a href="./../../../../monorail/documentation/index.html">Documentation</a> 
&raquo;
	<a href="./../../../../monorail/documentation/v1rc2/index.html">MonoRail RC2 Documentation</a> 
&raquo;
	<a href="./../../../../monorail/documentation/v1rc2/usersguide/index.html">User's Guide</a> 
&raquo;
<u>Installing MonoRail</u>
</div>

		<!-- start content -->
<p>
MonoRail does not require any complex installation. 
However, you must associate the extension you want to 
use with the ASP.Net ISAPI on IIS.
</p><a name="Internet_Information_Services"></a>
  <h1>Installing on Internet Information Services</h1>
<p>
If you are running IIS, then you need to associate the 
the extension you want to use for MonoRail with ASP.Net 
ISAPI. This is a very simple operation. If you are concerned about 
shared hosting see the last section on this document.
</p><p>
Usually the extension is <tt>rails</tt> or <tt>castle</tt>, but 
you can use whatever extension you want.
</p>  <h2>First step: open the IIS MMC</h2>
<p><img src="./../../../../images/monorail/Mrconf0.png" ></img></p>  <h2>Second step: open the web site configuration</h2>
<p><ol><li>Right-click the <b>Default Web Site</b> item and choose <b>Properties</b></li><li>Select the <b>Home Directory</b> tab</li><li>Click <b>Configurations</b></li></ol></p><p><img src="./../../../../images/monorail/Mrconf1.png" ></img></p><p><img src="./../../../../images/monorail/Mrconf2.png" ></img></p>  <h2>Third step: associate the file extension</h2>
<p><ol><li>Click <b>Add</b></li><li>Select the <b>ISAPI</b> DLL. You can copy-and-paste the complete DLL file name from another extension, such as <tt>.aspx</tt>. In most systems it will be something like 
<tt>C:\WINDOWS\Microsoft.NET\Framework\v1.1.4322\aspnet_isapi.dll</tt> 
(for .NET 1.1) or 
<tt>C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll</tt> (for .NET 2.0).
	</li><li>Fill in the extension (for example <tt>.rails</tt>)
	as the file extension (make sure you do not omit the leading dot)
	</li><li><b>Uncheck</b> the <b>Check file exists</b> check box
	
	</li></ol></p>  <div class="note">
<div class="notetopbg">
<div class="noteborderleft">
<div class="noteborderright">
<div class="notetopleft">
<div class="notetopright">
<div class="notebottomleft">
<div class="notebottomright">
<div class="boxtitle">Quick Note</div>
<div class="innercontent">
<p><b>Windows XP Pro users</b>: If your <b>OK</b> 
	button is disabled even if you have <b>Administrator</b> rights: 
	click in the <b>Executable</b> text field. This will expand the 
	relative path to the dll into a full path and will enable the <b>OK</b> button.
	</p>
</div></div></div></div></div></div></div></div></div>
<p><img src="./../../../../images/monorail/Mrconf3.png" ></img></p><a name="Cassini"></a>
  <h1>Running with Cassini</h1>
<p><a href="http://www.asp.net/Projects/Cassini/Download/Default.aspx?tabindex=0&tabid=1" >Cassini</a> is the easiest way to run the application as it requires nothing to be configured. It is suitable for development. You can run it from VS.Net and then be able to debug your application easily.
	</p><p><img src="./../../../../images/monorail/vsproppages_cassini.jpg" ></img></p><p>
	If you are using Visual Studio 2005, then you might want to use the integrated
	web server as it is basically the same.
	</p><a name="XSP"></a>
  <h1>Mono and XSP</h1>
<p>
Open a shell and go to directory containing web.config. Call xsp:
	</p>  <pre class="commonpre">xsp --port 80</pre>
<p>
Notice that Apache2 + mod_mono is much more 
efficient than XSP. Use XSP only for tests and small 
applications development. 
	</p><a name="ApacheMono"></a>
  <h1>Running with Apache/Mono</h1>
<p>
	We assume that you have Apache Httpd, mod_mono and xsp from the Mono Project installed.
	</p>  <h2>Configuring Apache</h2>
<p>
Add the following lines to your httpd.conf:
	</p>    <pre class="csharpcode">

LoadModule mono_module modules/mod_mono.so
AddHandler mono .rails .aspx .ashx .asmx .ascx .asax .config .ascx
MonoRunXSP True

Alias /test "/web/test"
AddMonoApplications default "/test:/web/test"
<span class="kwrd">&lt;</span><span class="html">Location</span> /<span class="attr">test</span><span class="kwrd">&gt;</span>
    SetHandler mono
<span class="kwrd">&lt;/</span><span class="html">Location</span><span class="kwrd">&gt;</span></pre>
  <p>
The first line adds the mod_mono module to Apache.

The second line sets up mod_mono to handle asp.net and MonoRail file extensions.

The third line allows Apache to start and stop the mod_mono_server process.

The following group of lines sets up /test to map to your application. 	
</p>  <h3>Apache Httpd 2</h3>
<p>
If you build Mod_mono from sources, file mod_mono.conf will be installed at /etc/apache2/mod_mono.conf. To load the module you only need to create a symlink and reload Apache:
	</p>    <pre class="csharpcode">

ln -s /etc/apache2/mond_mono.conf /etc/apache2/mods-enabled/</pre>
  <p>
Place the configuration above on /etc/apache2/sites-enabled/default and change "Location" for "Directory" if your website lives in filesystem (http://httpd.apache.org/docs/2.2/mod/core.html#location). /etc/apache2/sites-enabled/default:
	</p>    <pre class="csharpcode">

AddHandler mono .rails .aspx .ashx .asmx .ascx .asax .config .ascx
Alias /example /var/www/example
AddMonoApplications default "/example:/var/www/example"
MonoRunXSP True
<span class="kwrd">&lt;</span><span class="html">Directory</span> /<span class="attr">var</span>/<span class="attr">www</span>/<span class="attr">example</span><span class="kwrd">&gt;</span>
    SetHandler mono
<span class="kwrd">&lt;/</span><span class="html">Directory</span><span class="kwrd">&gt;</span></pre>
  <p>
Paths could change depending of your distribution 
	</p>  <h2>Deploying the application</h2>
<p>
	To deploy, simply copy your webapp's bin and Views directory as well
	as Global.asax and your web.config files to /web/test and then start Apache.
	</p><p>
You can now point your browser at http://yourserver.com/test/index.rails or which ever .rails page you choose. 
	</p><a name="DeployingToSharedHost"></a>
  <h1>Deploying to a shared host</h1>
<p>
	On a shared hosting, you may not be able to convince the host to map .rails extentions to the ASP.Net framework, which means that you wouldn't be able to "catch" a request for a rails document and map it to the appropriate controller.
	</p><p>
	A simple solution for this problem is to just switch to .aspx extention (and change the httpHandler configuration, of course). For example:
	</p>    <pre class="csharpcode">

<span class="kwrd">&lt;</span><span class="html">httpHandlers</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">verb</span><span class="kwrd">="*"</span> <span class="attr">path</span><span class="kwrd">="*.ashx"</span> 
       <span class="attr">type</span><span class="kwrd">="Castle.MonoRail.Framework.MonoRailHttpHandlerFactory, Castle.MonoRail.Framework"</span> <span class="kwrd">/&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">httpHandlers</span><span class="kwrd">&gt;</span></pre>
  		<!-- end content -->
		
	<div id="footer">
	Found an error? Something inaccurate? 
	<a href="../../../../community/getinvolved.html">Help us improve the documentation</a> <br/>
	Generated by <a href="../../../../others/anakia/index.html">Castle Anakia</a>. 
	
	<p>&nbsp;</p>
	
	<p>
	Sponsored by <img src="../../../../images/logothumb.gif" /> <a href="http://www.castlestronghold.com">Castle Stronghold</a>.
	</p>
	
	</div>

	<!-- Search Google -->
<center>
<FORM method=GET action="http://www.google.com/custom">
<TABLE bgcolor="#FFFFFF" cellspacing="4" border="0" style="border: solid 1px gray;" align="center">
<tr valign=top><td>
<A HREF="http://www.google.com/search">
<IMG SRC="http://www.google.com/logos/Logo_40wht.gif" border=0 ALT=Google align=middle></A>
</td>
<td>
<INPUT TYPE=text name=q size=31 maxlength=255 value="">
<INPUT type=submit name=sa VALUE="Google Search">
<INPUT type=hidden name=cof VALUE="S:http://www.castlestronghold.com;GL:1;VLC:#373737;AH:center;LH:63;LC:#0A50A1;GFNT:#5B5B5B;L:http://www.castleproject.org/images/castle-logo.gif;ALC:#0A50A1;BIMG:http://www.castleproject.org/images/bg.png;LW:280;T:#5B5B5B;AWFID:3d565acacdd9f388;">
<input type=hidden name=domains value="castleproject.org"><br><input type=radio name=sitesearch value=""> Search WWW <input type=radio name=sitesearch value="castleproject.org" checked> Search castleproject.org
</td></tr></TABLE>
</FORM>
<!-- Search Google -->
</center>
	&nbsp;
	<br/>

		</div> <!-- end of content -->
  </div><!-- end of page -->
  


	</body>
</html>
