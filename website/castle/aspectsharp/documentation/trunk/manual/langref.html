<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">









<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
		<title>Configuration Language Reference :: Castle Project</title>
		<link rel="stylesheet" href="../../../../base.css" />
		<link rel="stylesheet" href="../../../../elem.css" />
		<link rel="stylesheet" href="../../../../csharp.css" />
		<link rel="stylesheet" href="../../../../TAB_styles.css" />
		<script language="javascript" src="../../../../mktree.js"></script>
		<script type="text/javascript" src="../../../../TAB_Function_Lib.js"></script>
	</head>

	<body>

<div id="container">

  <div id="topbuttonscontainer"></div>

  <div id="maintitle">
    <h1> <a href="/" title="Home" accesskey="1">Home</a> </h1>
  </div>

  <div id="mainbar">
    <div id="mainbarleft"><div id="mainbarright"></div></div>
  </div>
  
  <div id="page">
		<div id="sidebar" >
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../aspectsharp/index.html">Aspect#</a>
</span>
  <ul>
<li>
<a href="./../../../../aspectsharp/gettingstarted/index.html">Getting started</a>
</li>
<li>
<a href="./../../../../aspectsharp/faq.html">FAQ</a>
</li>
<li>
<a href="./../../../../aspectsharp/recipes/index.html">Recipes</a>
</li>
<li>
<a href="./../../../../aspectsharp/externalarticles.html">External Articles</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="lightmenu">
    <div class="lightmenucontent">
<span class="menutitle">
<a href="./../../../../aspectsharp/documentation/trunk/index.html">Documentation</a>
</span>
  <ul>
<li>
<a href="./../../../../aspectsharp/documentation/trunk/releasenotes/index.html">Release notes</a>
</li>
<li>
<a href="./../../../../aspectsharp/documentation/trunk/manual/index.html">Reference Manual</a>
</li>
<li>
<a href="./../../../../aspectsharp/documentation/trunk/usersguide/index.html">User's Guide</a>
</li>
<li>
<a href="./../../../../aspectsharp/documentation/trunk/advanced/index.html">Advanced usage</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
  <div class="darkmenu">
    <div class="darkmenucontent">
<span class="menutitle">
Navigation
</span>
  <ul>
<li>
<a href="./../../../../index.html">Back to Main Page</a>
</li>
  </ul>
    </div>
  </div>
  <br/>
			<br/>
		</div>
		
		<div id="content">
		<div class="callout-pic">

<!-- Begin Table of contents -->
<div id="toc">
<h2>Table of contents</h2>
<ul>
<li class='toclevel-1'><a href="#basic"><span class="tocnumber">1</span> <span class="toctext">Basic definitions</span></a>
</li>
<li class='toclevel-1'><a href="#imports"><span class="tocnumber">2</span> <span class="toctext">Imports</span></a>
</li>
<li class='toclevel-1'><a href="#interceptors"><span class="tocnumber">3</span> <span class="toctext">Global Interceptors</span></a>
</li>
<li class='toclevel-1'><a href="#gmixins"><span class="tocnumber">4</span> <span class="toctext">Global Mixins</span></a>
</li>
<li class='toclevel-1'><a href="#aspects"><span class="tocnumber">5</span> <span class="toctext">Aspects</span></a>
</li>
<li class='toclevel-1'><a href="#includes"><span class="tocnumber">6</span> <span class="toctext">Includes</span></a>
</li>
<li class='toclevel-1'><a href="#pointcuts"><span class="tocnumber">7</span> <span class="toctext">Pointcuts</span></a>
</li>
<li class='toclevel-1'><a href="#advices"><span class="tocnumber">8</span> <span class="toctext">Advices</span></a>
</li>
</ul>
</div>
<!-- End Table of contents -->
		
		</div>

		<h1 class="firstHeading">
		    Configuration Language Reference
		</h1> 
	
<div class="breadcrumbs">
&raquo;
	<a href="./../../../../index.html">Main Page</a> 
&raquo;
	<a href="./../../../../aspectsharp/index.html">Aspect#</a> 
&raquo;
	<a href="./../../../../aspectsharp/documentation/index.html">Documentation</a> 
&raquo;
	<a href="./../../../../aspectsharp/documentation/trunk/index.html">MonoRail RC2 Documentation</a> 
&raquo;
	<a href="./../../../../aspectsharp/documentation/trunk/manual/index.html">Reference Manual</a> 
&raquo;
<u>Configuration Language Reference</u>
</div>

		<!-- start content -->
<p>Reference documentation of the Aspect Sharp's configuration language</p><p>The purpose of Aspect# language is to offer you a cleaner way to configure, describe and document your aspects configuration without have to rely on creepy xml syntax to do so.</p><a name="basic"></a>
  <h1>Basic definitions</h1>
<p>
You must obey to a few rules to use the Aspect# language, and the first rule is that order matters. So your declarations must obey this sequence:

</p>  <pre class="commonpre">
 [Imports]
 
 [Global Interceptor map]
 
 [Global Mixin map]
 
 Aspects definitions
</pre>
<a name="imports"></a>
  <h1>Imports</h1>
<p>
The imports section helps you to keep a clean code and helps the language to resolve the types.
</p>  <pre class="commonpre">
 Import Namespace.Name [in AssemblyName]
</pre>
<tt>Examples:</tt>  <pre class="commonpre">
 Import System.Collections in System

 Import AspectSharp.Core
</pre>
<a name="interceptors"></a>
  <h1>Global Interceptors</h1>
<p>
In the case that you have an interceptor that is going to be used in more than one aspect - or even more than one pointcut, you can define it in an global interceptor section:
</p>  <pre class="commonpre">
 interceptors [ 
   "key" : InterceptorType ; 
   "key2" : InterceptorType2 
 ]
</pre>
<tt>Examples</tt>  <pre class="commonpre">
 interceptors [ 
   "logger" : DigitalGravity.Interceptors.Logger in DigitalGravity.XProject 
 ]


 Import DigitalGravity.Interceptors in DigitalGravity.XProject
 
 interceptors [ 
   "logger" : Logger 
 ]</pre>
<p>Once you've done it, you can refer to them in an aspect declaration by their keys:</p>  <pre class="commonpre">
 aspect Test for MyClass
 
   pointcut method(*)
     advice("key")
   end
 
   pointcut property(*)
     advice("key2")
   end
 
 end
</pre>
<a name="gmixins"></a>
  <h1>Global Mixins</h1>
<p>For the same reason there is also a mixin global section:</p>  <pre class="commonpre">
 mixins [ 
   "key" : MixinType ; 
   "key2" : MixinType2 
 ]
</pre>
<tt>Examples</tt>  <pre class="commonpre">
 mixins [ 
   "security" : DigitalGravity.Mixins.SecurityMixin in DigitalGravity.XProject 
 ]


 Import DigitalGravity.Mixins in DigitalGravity.XProject
 
 mixins [ 
   "security" : SecurityMixin
 ]
</pre>
<p>Once you've done it, you can refer to them in an aspect declaration by their keys:</p>  <pre class="commonpre">
 aspect Test for MyClass
 
   include("security")
 
 end
</pre>
<a name="aspects"></a>
  <h1>Aspects</h1>
<p>An aspect section defines which mixins and which pointcuts will be applied to a type or a set of types:</p>  <pre class="commonpre">
 aspect Name for Type 
   [include]
   [pointcuts]
 end
</pre>
<tt>Examples</tt>  <pre class="commonpre">
 aspect MyAspect for Customer
 end

 aspect MyAspect for [ My.Namespace.Classes excludes(Customer,Author) ]
 end

 aspect MyAspect for [ assignableFrom(Customer) ]
 end

 aspect MyAspect for [ customMatcher(MyAspectMatcher) ]
 end
</pre>
<p>When you invoke the AspectEngine.Wrap method on an instance, basically Aspect# will try to match the aspects for that particular instance. If more than one are matched, a new aspect is created from the union and will be used as the aspect definition. </p><p>If you need a more specific semantic to match aspects, you can provide your own using the customMatcher keyword (as the example above). Your class must implement the IClassMatcher interface and perform its logic returning true if the instance is eligible for that aspect. </p><a name="includes"></a>
  <h1>Includes</h1>
<p>
You use one or more include to add mixins to the resulting type in an aspect definition.
</p><tt>Examples</tt>  <pre class="commonpre">
 aspect MyAspect for Customer
   include DigitalGravity.Mixins.Security in DigitalGravity.XProject
   include System.Collections.ArrayList in System
 end
</pre>
<a name="pointcuts"></a>
  <h1>Pointcuts</h1>
<p>The purpose of pointcuts is to define an expression that must be true (matched) in order to introduce advices.</p>  <pre class="commonpre">
 pointcut [target][method signature]
   advice(type)
   advice("key")
 end
</pre>
<p>The possible targets are:</p><ul><li>method</li><li>property </li><li>propertyread </li><li>propertywrite </li></ul><p>You can also combine them if you want, provided that they make sense</p>  <pre class="commonpre">
 pointcut method|property(*)
 end

 pointcut method|propertyread(*)
 end

 pointcut propertywrite(*)
 end
</pre>
<p>Using property|propertywrite for instance is meaningless, and you'll get an error.</p><p>The method signature can be simple as a (*) meaning everything, or (System.IList Create(int, *)) meaning methods named Create that returns System.IList and have at least the first argument of the type int. Please note that return types and argument types here are not resolved, so you have to use the full type name. </p>  <div class="warning">
<div class="warningtopbg">
<div class="warningborderleft">
<div class="warningborderright">
<div class="warningtopleft">
<div class="warningtopright">
<div class="warningbottomleft">
<div class="warningbottomright">
	<div class="boxtitle">Warning</div>
<div class="innercontent">
<p>Regular expressions are not fully supported. In fact, you can use only .* to match something in the rest of an name like (Str.* Create(int, string)) that will match Create methods with two arguments (the first an int and the second a String) and returning a type which the name starts with Str, like String, Strange, Stripissimo and so on.</p>
</div></div></div></div></div></div></div></div></div>
<tt>Examples</tt>  <pre class="commonpre">
 // All read and write property named Name
 pointcut property(* Name)
 end

 // All read and write property named 
 // C***Name like CustomerName
 pointcut property(string C.*Name)
 end

 // The method Perform returning void with no arguments 
 pointcut method(void Perform)
 end

 // The method Perform with the first argument as String
 // and we don't care about the other arguments
 pointcut method(void Perform(string, *))
 end
</pre>
<a name="advices"></a>
  <h1>Advices</h1>
<p>Advices are the pieces of code that will be associated with a given joinpoint. Aspect# only supports MethodInterceptors advices. </p><p>Please note that we use lazy instantiation of interceptors and only one instance of an interceptor will exist per Wrap(). In other words, proxies will not share interceptors. </p><tt>Examples</tt>  <pre class="commonpre">
 aspect MyAspect for Customer
   pointcut method(*)
     advice(LogInvocationInterceptor)
   end
 end


 aspect MyAspect for Customer
   pointcut method(*)
     advice(Namespace.MyLogger in MyAssembly)
   end
 end
</pre>
		<!-- end content -->
		
	<div id="footer">
	Found an error? Something inaccurate? <a href="">Help us improve the documentation</a> <br/>
	Generated by <a href="">Castle Anakia</a>. 
	</div>

	&nbsp;
	<br/>

		</div> <!-- end of content -->
  </div><!-- end of page -->
  
</div>

	</body>
</html>
